function assert(r,t){r||(kiwi_trace(),alert("assert failed "+(t||"")))}var ooura32={DIRECTION_FORWARDS:1,DIRECTION_BACKWARDS:-1,FFT:function(r,t){return assert(ooura32.isPowerOf2(r)),t||(t={type:"real",radix:4}),this_={},this_.real="real"===t.type,this_.real||assert("complex"===t.type),this_.size=r,this_.ip=new Int16Array(2+Math.round(Math.sqrt(r))),this_.w=new Float32Array(r/2),this_.internal=new Float32Array(r),ooura32.init_makewt(r/4,this_.ip.buffer,this_.w.buffer),this_.real?(ooura32.init_makect(r/4,this_.ip.buffer,this_.w.buffer,r/4),this_.fft=ooura32.fftReal,this_.ifft=ooura32.ifftReal,this_.fftInPlace=ooura32.fftInPlaceReal,this_.ifftInPlace=ooura32.ifftInPlaceReal):(this_.fft=ooura32.fftComplex,this_.ifft=ooura32.ifftComplex,this_.fftInPlace=ooura32.fftInPlaceComplex,this_.ifftInPlace=ooura32.ifftInPlaceComplex),this_},vectorSize:function(r){return assert(ooura32.isPowerOf2(r)),r/2+1},scalarSize:function(r){var t=2*(r-1);return assert(ooura32.isPowerOf2(t)),t},isPowerOf2:function(r){return"number"==typeof r&&(r&&0==(r&r-1))},getScalarSize:function(r){return r.size},getVectorSize:function(r){return ooura32.vectorSize(r.size)},scalarArrayFactory:function(r){return new Float32Array(ooura32.getScalarSize(r))},vectorArrayFactory:function(r){return new Float32Array(ooura32.getVectorSize(r))},fftReal:function(r,t,a,o){var f=new Float32Array(t);r.internal.set(f),ooura32.trans_rdft(r.size,ooura32.DIRECTION_FORWARDS,r.internal.buffer,r.ip.buffer,r.w.buffer);for(var e=new Float32Array(o),i=new Float32Array(a),n=0,u=0;n!==r.size;)i[n]=r.internal[u++],e[n++]=-r.internal[u++];i[r.size/2]=-e[0],e[0]=0,e[r.size/2]=0},ifftReal:function(r,t,a,o){for(var f=new Float32Array(o),e=new Float32Array(a),i=0,n=0;i!==r.size;)r.internal[n++]=e[i],r.internal[n++]=-f[i++];r.internal[1]=e[r.size/2],ooura32.trans_rdft(r.size,ooura32.DIRECTION_BACKWARDS,r.internal.buffer,r.ip.buffer,r.w.buffer);new Float32Array(t);console.log("older js doesn't support '=>'")},xfftComplex:function(r,t,a,o,f,e){for(var i=new Float32Array(a),n=new Float32Array(o),u=new Float32Array(f),l=new Float32Array(e),s=0,c=0;s!==r.size;)r.internal[c++]=i[s],r.internal[c++]=-n[s++];for(ooura32.trans_cdft(r.size,t,r.internal.buffer,r.ip.buffer,r.w.buffer),s=0,c=0;s!==r.size;)u[s]=r.internal[c++],l[s++]=-r.internal[c++]},fftComplex:function(r,t,a,o,f){ooura32.xfftComplex(r,ooura32.DIRECTION_FORWARDS,t,a,o,f)},ifftComplex:function(r,t,a,o,f){ooura32.xfftComplex(r,ooura32.DIRECTION_BACKWARDS,t,a,o,f);for(var e=new Float32Array(o),i=new Float32Array(f),n=0;n<r.size/2;++n)e[n]=2*e[n]/r.size,i[n]=2*i[n]/r.size},fftInPlaceReal:function(r){ooura32.trans_rdft(this_,this_.size,ooura32.DIRECTION_FORWARDS,r,this_.ip.buffer,this_.w.buffer)},fftInPlaceComplex:function(r){ooura32.trans_cdft(this_,this_.size,ooura32.DIRECTION_FORWARDS,r,this_.ip.buffer,this_.w.buffer)},ifftInPlaceReal:function(r){ooura32.trans_rdft(this_,this_.size,ooura32.DIRECTION_BACKWARDS,r,this_.ip.buffer,this_.w.buffer)},ifftInPlaceComplex:function(r){ooura32.trans_cdft(this_,this_.size,ooura32.DIRECTION_BACKWARDS,r,this_.ip.buffer,this_.w.buffer)},init_makewt:function(r,t,a){var o,f,e,i,n=new Int16Array(t),u=new Float32Array(a);if(n[0]=r,n[1]=1,r>2&&(o=r>>1,f=Math.atan(1)/o,u[0]=1,u[1]=0,u[o]=Math.cos(f*o),u[o+1]=u[o],o>2)){for(var l=2;l<o;l+=2)e=Math.cos(f*l),i=Math.sin(f*l),u[l]=e,u[l+1]=i,u[r-l]=i,u[r-l+1]=e;ooura32.child_bitrv2(r,n.buffer,2,u.buffer)}},init_makect:function(r,t,a,o){var f,e,i,n=new Int16Array(t),u=new Float32Array(a).subarray(o);if(n[1]=r,r>1)for(e=r>>1,i=Math.atan(1)/e,u[0]=Math.cos(i*e),u[e]=.5*u[0],f=1;f<e;f++)u[f]=.5*Math.cos(i*f),u[r-f]=.5*Math.sin(i*f)},trans_rdft:function(r,t,a,o,f){var e=new Int16Array(o),i=new Float32Array(a),n=e[0],u=e[1];if(t===ooura32.DIRECTION_FORWARDS){r>4?(ooura32.child_bitrv2(r,o,2,a),ooura32.child_cftfsub(r,a,f),ooura32.child_rftfsub(r,a,u,f,n)):4===r&&ooura32.child_cftfsub(r,a,f);var l=i[0]-i[1];i[0]+=i[1],i[1]=l}else i[1]=.5*(i[0]-i[1]),i[0]-=i[1],r>4?(ooura32.child_rftbsub(r,a,u,f,n),ooura32.child_bitrv2(r,o,2,a),ooura32.child_cftbsub(r,a,f)):4===r&&ooura32.child_cftfsub(r,a,f)},trans_cdft:function(r,t,a,o,f){r>4?t===ooura32.DIRECTION_FORWARDS?(ooura32.child_bitrv2(r,o,2,a),ooura32.child_cftfsub(r,a,f)):(ooura32.child_bitrv2conj(r,o,2,a),ooura32.child_cftbsub(r,a,f)):4===r&&ooura32.child_cftfsub(r,a,f)},child_bitrv2:function(r,t,a,o){var f,e,i,n,u,l,s,c,_,h,b=new Int16Array(t).subarray(a),A=new Float32Array(o);for(b[0]=0,u=r,l=1;l<<3<u;){for(u>>=1,f=0;f<l;f++)b[l+f]=b[f]+u;l<<=1}var w=2*l;if(l<<3===u)for(i=0;i<l;i++){for(f=0;f<i;f++)e=2*f+b[i],n=2*i+b[f],s=A[e],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=2*w,s=A[e+=w],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n-=w,s=A[e+=w],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=2*w,s=A[e+=w],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c;n=(e=2*i+w+b[i])+w,s=A[e],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c}else for(i=1;i<l;i++)for(f=0;f<i;f++)e=2*f+b[i],n=2*i+b[f],s=A[e],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=w,s=A[e+=w],c=A[e+1],_=A[n],h=A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c},child_bitrv2conj:function(r,t,a,o){var f,e,i,n,u,l,s,c,_,h,b=new Int16Array(t).subarray(a),A=new Float32Array(o);for(b[0]=0,u=r,l=1;l<<3<u;){for(u>>=1,f=0;f<l;f++)b[l+f]=b[f]+u;l<<=1}var w=2*l;if(l<<3===u)for(i=0;i<l;i++){for(f=0;f<i;f++)e=2*f+b[i],n=2*i+b[f],s=A[e],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=2*w,s=A[e+=w],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n-=w,s=A[e+=w],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=2*w,s=A[e+=w],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c;A[(n=2*i+b[i])+1]=-A[n+1],n=(e=n+w)+w,s=A[e],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,A[(n+=w)+1]=-A[n+1]}else for(A[1]=-A[1],A[w+1]=-A[w+1],i=1;i<l;i++){for(f=0;f<i;f++)e=2*f+b[i],n=2*i+b[f],s=A[e],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c,n+=w,s=A[e+=w],c=-A[e+1],_=A[n],h=-A[n+1],A[e]=_,A[e+1]=h,A[n]=s,A[n+1]=c;A[(n=2*i+b[i])+1]=-A[n+1],A[n+w+1]=-A[n+w+1]}},child_cftmdl:function(r,t,a,o){var f,e,i,n,u,l,s,c,_,h,b,A,w,y,F,d,I,R,v,p,C,z=new Float32Array(a),D=new Float32Array(o),O=t<<2;for(f=0;f<t;f+=2)n=(i=(e=f+t)+t)+t,y=z[f]+z[e],F=z[f+1]+z[e+1],d=z[f]-z[e],I=z[f+1]-z[e+1],R=z[i]+z[n],v=z[i+1]+z[n+1],p=z[i]-z[n],C=z[i+1]-z[n+1],z[f]=y+R,z[f+1]=F+v,z[i]=y-R,z[i+1]=F-v,z[e]=d-C,z[e+1]=I+p,z[n]=d+C,z[n+1]=I-p;for(c=D[2],f=O;f<t+O;f+=2)n=(i=(e=f+t)+t)+t,y=z[f]+z[e],F=z[f+1]+z[e+1],d=z[f]-z[e],I=z[f+1]-z[e+1],R=z[i]+z[n],v=z[i+1]+z[n+1],p=z[i]-z[n],C=z[i+1]-z[n+1],z[f]=y+R,z[f+1]=F+v,z[i]=v-F,z[i+1]=y-R,y=d-C,F=I+p,z[e]=c*(y-F),z[e+1]=c*(y+F),y=C+d,F=p-I,z[n]=c*(F-y),z[n+1]=c*(F+y);l=0;var S=2*O;for(u=S;u<r;u+=S){for(s=2*(l+=2),h=D[l],b=D[l+1],A=(c=D[s])-2*b*(_=D[s+1]),w=2*b*c-_,f=u;f<t+u;f+=2)n=(i=(e=f+t)+t)+t,y=z[f]+z[e],F=z[f+1]+z[e+1],d=z[f]-z[e],I=z[f+1]-z[e+1],R=z[i]+z[n],v=z[i+1]+z[n+1],p=z[i]-z[n],C=z[i+1]-z[n+1],z[f]=y+R,z[f+1]=F+v,y-=R,F-=v,z[i]=h*y-b*F,z[i+1]=h*F+b*y,y=d-C,F=I+p,z[e]=c*y-_*F,z[e+1]=c*F+_*y,y=d+C,F=I-p,z[n]=A*y-w*F,z[n+1]=A*F+w*y;for(A=(c=D[s+2])-2*h*(_=D[s+3]),w=2*h*c-_,f=u+O;f<t+(u+O);f+=2)n=(i=(e=f+t)+t)+t,y=z[f]+z[e],F=z[f+1]+z[e+1],d=z[f]-z[e],I=z[f+1]-z[e+1],R=z[i]+z[n],v=z[i+1]+z[n+1],p=z[i]-z[n],C=z[i+1]-z[n+1],z[f]=y+R,z[f+1]=F+v,y-=R,F-=v,z[i]=-b*y-h*F,z[i+1]=-b*F+h*y,y=d-C,F=I+p,z[e]=c*y-_*F,z[e+1]=c*F+_*y,y=d+C,F=I-p,z[n]=A*y-w*F,z[n+1]=A*F+w*y}},child_cft1st:function(r,t,a){var o,f,e,i,n,u,l,s,c,_,h,b,A,w,y,F,d,I=new Float32Array(t),R=new Float32Array(a);for(_=I[0]+I[2],h=I[1]+I[3],b=I[0]-I[2],A=I[1]-I[3],w=I[4]+I[6],y=I[5]+I[7],F=I[4]-I[6],d=I[5]-I[7],I[0]=_+w,I[1]=h+y,I[4]=_-w,I[5]=h-y,I[2]=b-d,I[3]=A+F,I[6]=b+d,I[7]=A-F,i=R[2],_=I[8]+I[10],h=I[9]+I[11],b=I[8]-I[10],A=I[9]-I[11],w=I[12]+I[14],y=I[13]+I[15],F=I[12]-I[14],d=I[13]-I[15],I[8]=_+w,I[9]=h+y,I[12]=y-h,I[13]=_-w,_=b-d,h=A+F,I[10]=i*(_-h),I[11]=i*(_+h),_=d+b,h=F-A,I[14]=i*(h-_),I[15]=i*(h+_),f=0,o=16;o<r;o+=16)e=2*(f+=2),u=R[f],l=R[f+1],s=(i=R[e])-2*l*(n=R[e+1]),c=2*l*i-n,_=I[o]+I[o+2],h=I[o+1]+I[o+3],b=I[o]-I[o+2],A=I[o+1]-I[o+3],w=I[o+4]+I[o+6],y=I[o+5]+I[o+7],F=I[o+4]-I[o+6],d=I[o+5]-I[o+7],I[o]=_+w,I[o+1]=h+y,_-=w,h-=y,I[o+4]=u*_-l*h,I[o+5]=u*h+l*_,_=b-d,h=A+F,I[o+2]=i*_-n*h,I[o+3]=i*h+n*_,_=b+d,h=A-F,I[o+6]=s*_-c*h,I[o+7]=s*h+c*_,s=(i=R[e+2])-2*u*(n=R[e+3]),c=2*u*i-n,_=I[o+8]+I[o+10],h=I[o+9]+I[o+11],b=I[o+8]-I[o+10],A=I[o+9]-I[o+11],w=I[o+12]+I[o+14],y=I[o+13]+I[o+15],F=I[o+12]-I[o+14],d=I[o+13]-I[o+15],I[o+8]=_+w,I[o+9]=h+y,_-=w,h-=y,I[o+12]=-l*_-u*h,I[o+13]=-l*h+u*_,_=b-d,h=A+F,I[o+10]=i*_-n*h,I[o+11]=i*h+n*_,_=b+d,h=A-F,I[o+14]=s*_-c*h,I[o+15]=s*h+c*_},child_cftfsub:function(r,t,a){var o,f,e,i,n,u,l,s,c,_,h,b,A,w=new Float32Array(t),y=new Float32Array(a);if(n=2,r>8)for(ooura32.child_cft1st(r,w.buffer,y.buffer),n=8;n<<2<r;)ooura32.child_cftmdl(r,n,w.buffer,y.buffer),n<<=2;if(n<<2===r)for(o=0;o<n;o+=2)i=(e=(f=o+n)+n)+n,u=w[o]+w[f],l=w[o+1]+w[f+1],s=w[o]-w[f],c=w[o+1]-w[f+1],_=w[e]+w[i],h=w[e+1]+w[i+1],b=w[e]-w[i],A=w[e+1]-w[i+1],w[o]=u+_,w[o+1]=l+h,w[e]=u-_,w[e+1]=l-h,w[f]=s-A,w[f+1]=c+b,w[i]=s+A,w[i+1]=c-b;else for(o=0;o<n;o+=2)f=o+n,u=w[o]-w[f],l=w[o+1]-w[f+1],w[o]+=w[f],w[o+1]+=w[f+1],w[f]=u,w[f+1]=l},child_cftbsub:function(r,t,a){var o,f,e,i,n,u,l,s,c,_,h,b,A,w=new Float32Array(t),y=new Float32Array(a);if(n=2,r>8)for(ooura32.child_cft1st(r,w.buffer,y.buffer),n=8;n<<2<r;)ooura32.child_cftmdl(r,n,w.buffer,y.buffer),n<<=2;if(n<<2===r)for(o=0;o<n;o+=2)i=(e=(f=o+n)+n)+n,u=w[o]+w[f],l=-w[o+1]-w[f+1],s=w[o]-w[f],c=-w[o+1]+w[f+1],_=w[e]+w[i],h=w[e+1]+w[i+1],b=w[e]-w[i],A=w[e+1]-w[i+1],w[o]=u+_,w[o+1]=l-h,w[e]=u-_,w[e+1]=l+h,w[f]=s-A,w[f+1]=c-b,w[i]=s+A,w[i+1]=c+b;else for(o=0;o<n;o+=2)f=o+n,u=w[o]-w[f],l=-w[o+1]+w[f+1],w[o]+=w[f],w[o+1]=-w[o+1]-w[f+1],w[f]=u,w[f+1]=l},child_rftfsub:function(r,t,a,o,f){var e,i,n,u,l,s,c,_,h,b=new Float32Array(t),A=new Float32Array(o).subarray(f),w=r>>1,y=2*a/w;for(n=0,e=2;e<w;e+=2)i=r-e,u=.5-A[a-(n+=y)],l=A[n],_=u*(s=b[e]-b[i])-l*(c=b[e+1]+b[i+1]),h=u*c+l*s,b[e]-=_,b[e+1]-=h,b[i]+=_,b[i+1]-=h},child_rftbsub:function(r,t,a,o,f){var e,i,n,u,l,s,c,_,h,b=new Float32Array(t),A=new Float32Array(o).subarray(f);b[1]=-b[1];var w=r>>1,y=2*a/w;for(n=0,e=2;e<w;e+=2)i=r-e,u=.5-A[a-(n+=y)],l=A[n],_=u*(s=b[e]-b[i])+l*(c=b[e+1]+b[i+1]),h=u*c-l*s,b[e]-=_,b[e+1]=h-b[e+1],b[i]+=_,b[i+1]=h-b[i+1];b[w+1]=-b[w+1]}};