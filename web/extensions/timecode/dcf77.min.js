

/* web/extensions/timecode/dcf77.min.js */
var dcf77={arm:0,NOISE_THRESHOLD:3,cur:0,sec:0,msec:0,dcnt:0,tick:0,line:0,end:null};function dcf77_dmsg(c){w3_innerHTML("id-tc-dcf77",c)}function dcf77_legend(){0==(3&dcf77.line++)&&tc_dmsg("0 wwwwwwwwwwwwww EASNL 1 mmmmmmm p hhhhhh p dddddd www mmmmm yyyyyyyy p 0<br>")}function dcf77_decode(c){var t=tc_bcd(c,21,7,1),d=tc_bcd(c,29,6,1),n=tc_bcd(c,36,6,1),e=(tc_bcd(c,42,3,1),tc_bcd(c,45,5,1)-1),i=tc_bcd(c,50,8,1)+2e3,_=c[17]?"CEST":c[18]?"CET":"TZ?",r=n+" "+tc.mo[e]+" "+i+" "+d.leadingZeros(2)+":"+t.leadingZeros(2)+" "+_;tc_dmsg("  "+r+"<br>"),tc_stat("lime","Time decoded: "+r)}function dcf77_clr(){var c=dcf77;c.cnt=c.cur=c.one_width=c.zero_width=0,c.arm=c.no_modulation=c.dcnt=c.modct=c.line=c.sec=c.msec=0}function dcf77_ampl(c){var t=dcf77;if(tc.trig++,tc.trig>=100&&(tc.trig=0),c=c>.5?1:0,tc.ref||(tc.data=c,tc.ref=1),c==t.cur?t.cnt=0:(t.cnt++,t.cnt>t.NOISE_THRESHOLD&&(t.cur=c,t.cnt=0,tc.data^=1,tc.data?t.one_width=0:t.zero_width=0)),tc.data?t.one_width++:t.zero_width++,170==t.one_width&&(t.arm=1),t.arm&&0==tc.data&&(tc.trig=0,tc.sample_point=25,t.sec=0,t.msec=0,tc.state==tc.ACQ_SYNC?tc_stat("cyan","Found sync"):dcf77_decode(tc.raw),dcf77_legend(),tc.raw=[],t.arm=0,tc.state=tc.ACQ_DATA),t.msec+=10,1e3==t.msec&&(t.sec++,t.msec=0),tc.state==tc.ACQ_DATA&&tc.sample_point==tc.trig){var d=t.zero_width>15?1:0;tc.raw[t.sec]=d,tc_dmsg(d),[0,14,19,20,27,28,34,35,41,44,49,57,58].includes(t.dcnt)&&tc_dmsg(" "),t.dcnt++,60==t.dcnt&&(t.dcnt=0)}}function dcf77_focus(){}function dcf77_blur(){var c;(c=w3_el("id-tc-bits"))&&(c.innerHTML=""),(c=w3_el("id-tc-dcf77"))&&(c.innerHTML="")}function dcf77_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-bits")+w3_div("id-tc-dcf77")}


