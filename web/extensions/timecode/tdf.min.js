

/* web/extensions/timecode/tdf.min.js */
var tdf={arm:0,mod_threshold:.3,no_modulation:0,slice_period:150,slice_threshold:5,modct:0,sec:0,msec:0,line:0,dcnt:0,end:null};function tdf_dmsg(t){w3_innerHTML("id-tc-tdf",t)}function tdf_legend(){0==(3&tdf.line++)&&tc_dmsg("0 LS hhhh 000000 HH 0 ASN 01 mmmmmmm p hhhhhh p dddddd www mmmmm yyyyyyyy p 0<br>")}function tdf_decode(t){var c=tc_bcd(t,21,7,1),d=tc_bcd(t,29,6,1),e=tc_bcd(t,36,6,1),n=(tc_bcd(t,42,3,1),tc_bcd(t,45,5,1)-1),o=tc_bcd(t,50,8,1)+2e3,m=t[17]?"CEST":t[18]?"CET":"TZ?";tc_dmsg("  "+e+" "+tc.mo[n]+" "+o+" "+d.leadingZeros(2)+":"+c.leadingZeros(2)+" "+m+"<br>"),tc_stat("lime","Time decoded: "+e+" "+tc.mo[n]+" "+o+" "+d.leadingZeros(2)+":"+c.leadingZeros(2)+" "+m)}function tdf_clr(){var t=tdf;t.arm=t.no_modulation=t.dcnt=t.modct=t.line=t.sec=t.msec=0}function tdf_phase(t){var c=tdf,d=Math.abs(t);if(d<c.mod_threshold?(100==tc.no_modulation&&(c.arm=1,c.modct=0),tc.no_modulation++):(c.arm&&d>=c.mod_threshold&&(0==c.modct&&(scope_clr(),tc.mkr=1,c.sec=0,c.msec=0,tc.state==tc.ACQ_SYNC?tc_stat("cyan","Found sync"):tdf_decode(tc.raw),tdf_legend(),tc.raw=[],c.dcnt=0,tc.state=tc.ACQ_DATA),c.arm=0),tc.no_modulation=0,c.modct++),c.msec+=10,1e3==c.msec&&(c.sec++,c.msec=0,c.modct=0),tc.state==tc.ACQ_DATA&&c.msec==c.slice_period){tc.mkr=2;var e=c.modct>=c.slice_threshold?1:0;tc.trig=e+2,tc.raw[c.sec]=e,tc_dmsg(e),[0,2,6,12,14,15,18,20,27,28,34,35,41,44,49,57,58].includes(c.dcnt)&&tc_dmsg(" "),c.dcnt++,60==c.dcnt&&(c.dcnt=0)}else tc.trig=1}function tdf_focus(){}function tdf_blur(){var t;(t=w3_el("id-tc-tdf"))&&(t.innerHTML="")}function tdf_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-tdf")}


