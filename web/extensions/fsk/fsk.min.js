var fsk={ext_name:"fsk",first_time:!0,lhs:150,tw:1024,th:200,x:0,last_y:[],n_menu:4,menu0:-1,menu1:-1,menu2:-1,menu3:-1,header:null,menu_sel:"",test_mode:!1,freq:0,cf:1e3,shift:170,shift_i:1,SHIFT_CUSTOM_IDX:9,shift_cval:0,shift_custom:!1,baud:50,baud_i:2,BAUD_CUSTOM_IDX:8,baud_cval:0,baud_custom:!1,baud_mult:1,framing:"5N1.5",inverted:1,encoding:"ITA2",scope:0,run:0,single:0,decim:8,show_framing:0,fr_sample:0,fr_bpw:5,fr_phase:0,fr_bpd:0,fr_shift:!1,fr_w:6,fr_h:6,fr_s:2,sample_count:0,edge:0,CHU_offset:2.125,last_last:0};function fsk_main(){ext_switch_to_client(fsk.ext_name,fsk.first_time,fsk_recv),fsk.first_time||fsk_controls_setup(),fsk.first_time=!1}function fsk_recv(s){if("DAT"!=arrayBufferToStringLen(s,3))for(var f=arrayBufferToString(s).substring(4).split(" "),e=0;e<f.length;e++){var t=f[e].split("=");switch(t[0]){case"ready":kiwi_load_js_dir("extensions/fsk/",["JNX.js","BiQuadraticFilter.js","CCIR476.js","FSK_async.js"],"fsk_controls_setup");break;default:console.log("fsk_recv: UNKNOWN CMD "+t[0])}}else{var _=new Uint8Array(s,4),i=_[0],r=_.length-1;console.log("fsk_recv: DATA UNKNOWN cmd="+i+" len="+r)}}function fsk_scope_reset_display(){var s=fsk.canvas.ctx;s.fillStyle="black",s.fillRect(fsk.lhs,0,fsk.tw,fsk.th)}function fsk_scope(s,f,e){if(fsk.scope&&fsk.run&&(fsk.sample_count++,fsk.edge|=f,0==(fsk.sample_count&fsk.decim-1))){var t,_=fsk.canvas,i=fsk.canvas.ctx,r=_.width,n=_.height,a=fsk.lhs+fsk.x;fsk.edge?(i.fillStyle="red",i.fillRect(a,0,1,3*n/4),a-8>fsk.lhs&&(i.fillStyle="white",i.font="8px Courier",i.fillText(e,a-8,3*n/4+10))):(t=fsk.last_y[fsk.x],i.fillStyle="black",-1==t?i.fillRect(a,0,1,n):i.fillRect(a,t,1,1),i.fillStyle="yellow",i.fillRect(a,n/2,1,1)),s>1&&(s=1),s<-1&&(s=-1),t=Math.floor(n/2+s*n/4),i.fillStyle="lime",i.fillRect(a,t,1,1),fsk.last_y[fsk.x]=fsk.edge?-1:t,fsk.edge=0,fsk.x++,fsk.x>=r&&(fsk.x=0,fsk.single?fsk.run=0:(i.fillStyle="black",i.fillRect(fsk.lhs,3*n/4,fsk.tw,16)))}}function fsk_framing_reset(){fsk.fr_bits=[],fsk_framing_reset_display(),fsk.fr_sample=1}function fsk_framing_reset_display(){var s=fsk.canvas.ctx;if(fsk.fr_x=fsk.lhs+fsk.fr_s,fsk.fr_xi=0,fsk.fr_yi=fsk.fr_h+fsk.fr_s,fsk.fr_bitn=fsk.fr_bpw,fsk.data_msb=1<<fsk.fr_bpd-1,fsk.fr_shift=!1,s.fillStyle="lightGray",s.fillRect(fsk.lhs,0,fsk.tw,fsk.th),fsk.fr_bpd){s.fillStyle="red";var f=fsk.th-(fsk.fr_bitn-1*fsk.baud_mult)*fsk.fr_yi-fsk.fr_s;s.fillRect(fsk.lhs,f,fsk.tw,fsk.fr_s),f=fsk.th-(fsk.fr_bitn-(fsk.fr_bpd+1)*fsk.baud_mult)*fsk.fr_yi-fsk.fr_s,s.fillRect(fsk.lhs,f,fsk.tw,fsk.fr_s)}}function fsk_framing(s){fsk.fr_sample&&(fsk.fr_bits.push(s),fsk_framing_proc(s))}function fsk_framing_proc(s){var f=fsk.canvas.ctx,e=fsk.fr_yi;if(fsk.fr_y=fsk.th-fsk.fr_bitn*e,fsk.fr_bpd){var t,_=fsk.baud_mult,i=fsk.fr_bpd*_,r=fsk.fr_bpw-_,n=fsk.fr_bpw-_-i;if(fsk.fr_bitn==fsk.fr_bpw&&(fsk.fr_code=0),fsk.fr_bitn<=r&&fsk.fr_bitn>n&&(1!=_&&0!=(1&fsk.fr_bitn)||(fsk.fr_code>>=1,fsk.fr_code|=s?fsk.data_msb:0)),1==fsk.fr_bitn){var a=fsk.fr_code;a==fsk.encoder.LETTERS?(fsk.fr_shift=!1,t="↓"):a==fsk.encoder.FIGURES?(fsk.fr_shift=!0,t="↑"):t=fsk.encoder.code_to_char(a,fsk.fr_shift),t<0&&(t="☒"),f.fillStyle="black",f.font="12px Courier",f.fillText(t,fsk.fr_x,fsk.th-fsk.fr_bpw*e-14)}}s?(f.fillStyle="blue",f.fillRect(fsk.fr_x,fsk.fr_y,fsk.fr_w,fsk.fr_h)):(f.fillStyle="yellow",f.fillRect(fsk.fr_x,fsk.fr_y,fsk.fr_w,fsk.fr_h)),fsk.fr_bitn--,0==fsk.fr_bitn&&(fsk.fr_bitn=fsk.fr_bpw,fsk.fr_x+=fsk.fr_w+fsk.fr_s,fsk.fr_xi++,fsk.fr_x>=fsk.lhs+fsk.tw-fsk.fr_w-fsk.fr_s&&(fsk.fr_sample=0))}function fsk_phase(){fsk_framing_reset_display();for(var s=0;s<fsk.fr_bits.length-fsk.fr_phase;s++)fsk_framing_proc(fsk.fr_bits[s+fsk.fr_phase])}function fsk_baud_error_init(){var s=fsk.th/2,f=(fsk.canvas,fsk.canvas.ctx);f.fillStyle="white",f.font="14px Verdana",f.fillText("Baud",fsk.lhs/2-15,s),f.fillText("Error",fsk.lhs/2-15,s+14)}function fsk_baud_error(s){s>8&&(s=8),s<-8&&(s=-8);var f=Math.round(.8*fsk.th/2*s/8),e=fsk.lhs-40,t=fsk.th/2,_=(fsk.canvas,fsk.canvas.ctx);_.fillStyle="black",_.fillRect(e,0,20,fsk.th),f>0?(_.fillStyle="lime",_.fillRect(e,t-f,20,f)):(_.fillStyle="red",_.fillRect(e,t,20,-f))}var fsk_console_status_msg_p={scroll_only_at_bottom:!0,process_return_nexttime:!1,remove_returns:!0,ncol:135};function fsk_output_char(s){""!=s&&(fsk.framing.includes("EFR")&&(s="EFR "+fsk.menu_sel+s),fsk_console_status_msg_p.s=encodeURIComponent(s),kiwi_output_msg("id-fsk-console-msgs","id-fsk-console-msg",fsk_console_status_msg_p))}function fsk_audio_data_cb(s,f){fsk.jnx.process_data(s,f)}var fsk_weather={Germany:[{f:"147.3 DDH47",s:85,b:50,fr:"5N1.5",i:1,e:"ITA2",cf:500},{f:"11039 DDH9",s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"},{f:"14467.3 DDH8",s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"},{f:"4583 DDK2",s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"},{f:"7646 DDH7",s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"},{f:"10100.8 DDK9",s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"}]},fsk_maritime={"MSI (safety)":[{f:4210,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:6314,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:8416.5,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:12579,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:16806.5,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:19680.5,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"},{f:22376,cf:500,s:170,b:100,fr:"4/7",i:0,e:"CCIR476"}],"SVO Athens":[{f:12603.5,s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"}],"UDK2 Murmansk":[{f:6322.5,s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"}],"XSQ China":[{f:8425.5,s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"},{f:12622.5,s:450,b:50,fr:"5N1.5",i:1,e:"ITA2"}]},fsk_military={"PBB Dutch Navy":[{f:2474,s:850,b:75,fr:"5N1V",i:1,e:"ITA2"},{f:4280,s:850,b:75,fr:"5N1V",i:1,e:"ITA2"},{f:6358.5,s:850,b:75,fr:"5N1V",i:1,e:"ITA2"},{f:8439,s:850,b:75,fr:"5N1V",i:1,e:"ITA2"}],"RDL CIS":[{f:18.1,s:75,b:36,fr:"T600",i:1,e:"ITA2"},{f:4582,s:200,b:50,fr:"T600",i:1,e:"ITA2"}]},fsk_ham_utility={"Ham RTTY":[{f:"3590 80m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"7043 40m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"10143 30m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"14080 20m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"18105 17m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"21080 15m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"24925 12m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"},{f:"28080 10m",s:170,b:45.45,fr:"5N1.5",i:0,e:"ITA2"}],"EFR Teleswitch":[{f:"129.1 DCF49",s:340,b:200,fr:"EFR",i:1,e:"ASCII"},{f:"135.6 HGA22",s:340,b:200,fr:"EFR",i:1,e:"ASCII"},{f:"139 DCF39",s:340,b:200,fr:"EFR",i:1,e:"ASCII"}],"CHU time":[{f:3330,s:200,b:300,fr:"CHU",i:0,e:"ASCII"},{f:7850,s:200,b:300,fr:"CHU",i:0,e:"ASCII"},{f:14670,s:200,b:300,fr:"CHU",i:0,e:"ASCII"}]},fsk_menu_s=["Weather","Maritime","Military","Ham/Utility"],fsk_menus=[fsk_weather,fsk_maritime,fsk_military,fsk_ham_utility],fsk_shift_s=[85,170,200,340,425,450,500,850,1e3,"custom"],fsk_baud_s=[36,45.45,50,75,100,150,200,300,"custom"],fsk_framing_s=["5N1","5N1V","5N1.5","5N2","7N1","8N1","4/7","EFR","EFR2","CHU","T600"],fsk_encoding_s=["ITA2","ASCII","CCIR476"],fsk_mode_s=["decode","scope","framing"],fsk_bpd_s=["none","5","6","7","8"],fsk_decim_s=[1,2,4,8,16,32];function fsk_controls_setup(){fsk.saved_passband=ext_get_passband(),fsk.jnx=new JNX,fsk.freq=ext_get_freq()/1e3,fsk.jnx.set_baud_error_cb(fsk_baud_error),fsk.jnx.set_output_char_cb(fsk_output_char);var s=fsk.url_params=ext_param();s&&(s=s.split(",")).forEach(function(s,f){var e,t=s.split(":");t=t[t.length-1].toLowerCase(),w3_ext_param_array_match_str(fsk_framing_s,t,function(s,f){fsk.framing=f}),w3_ext_param_array_match_str(fsk_encoding_s,t,function(s,f){fsk.encoding=f}),(e=w3_ext_param("shift",s)).match?isNaN(e.num)||(fsk.shift=e.num,w3_ext_param_array_match_str(fsk_shift_s,e.num.toString(),function(s){fsk.shift_custom=!1})||(fsk.shift_custom=!0)):(e=w3_ext_param("baud",s)).match?isNaN(e.num)||(fsk.baud=e.num,w3_ext_param_array_match_str(fsk_baud_s,e.num.toString(),function(s){fsk.baud_custom=!1})||(fsk.baud_custom=!0)):(e=w3_ext_param("inverted",s)).match&&(fsk.inverted=0==e.num?0:1)});var f=time_display_html("fsk")+w3_div("id-fsk-data|width:"+px(fsk.lhs+1024)+"; height:200px; overflow:hidden; position:relative; background-color:black;",'<canvas id="id-fsk-canvas" width="'+(fsk.lhs+1024)+'" height="200" style="left:0; position:absolute"></canvas>',w3_div("id-fsk-console-msg w3-text-output w3-scroll-down w3-small w3-text-black|left:"+px(fsk.lhs)+"; width:1024px; height:200px; position:relative; overflow-x:hidden;",'<pre><code id="id-fsk-console-msgs"></code></pre>')),e=w3_div("id-fsk-controls w3-text-white",w3_divs("w3-container/w3-tspace-8",w3_col_percent("",w3_div("",w3_div("w3-show-inline-block w3-medium w3-text-aqua",'<b><a href="https://en.wikipedia.org/wiki/Frequency-shift_keying" target="_blank">FSK</a> decoder</b>')),50,w3_div("",'From <b><a href="https://arachnoid.com/JNX/index.html" target="_blank">JNX</a></b> by P. Lutus &copy; 2011'),50),w3_col_percent("",w3_div("id-fsk-station w3-text-css-yellow","&nbsp;"),50,w3_div("","Please <a href=\"javascript:sendmail('pvsslqwChjtjpgq-`ln');\">report</a> new stations for menus."),50),w3_col_percent("",w3_select_hier("w3-text-red","Weather","select","fsk.menu0",fsk.menu0,fsk_weather,"fsk_pre_select_cb"),25,w3_select_hier("w3-text-red","Maritime","select","fsk.menu1",fsk.menu1,fsk_maritime,"fsk_pre_select_cb"),25,w3_select_hier("w3-text-red","Military","select","fsk.menu2",fsk.menu2,fsk_military,"fsk_pre_select_cb"),25,w3_select_hier("w3-text-red","Ham/Utility","select","fsk.menu3",fsk.menu3,fsk_ham_utility,"fsk_pre_select_cb"),25),w3_inline("/w3-margin-between-16",w3_inline("",w3_select("|color:red","","shift","fsk.shift_i",W3_SELECT_SHOW_TITLE,fsk_shift_s,"fsk_shift_cb"),w3_input("id-fsk-shift-custom w3-margin-left w3-hide|padding:0;width:auto|size=4","","fsk.shift_cval",fsk.shift_cval,"fsk_shift_custom_cb")),w3_inline("",w3_select("|color:red","","baud","fsk.baud_i",W3_SELECT_SHOW_TITLE,fsk_baud_s,"fsk_baud_cb"),w3_input("id-fsk-baud-custom w3-margin-left w3-hide|padding:0;width:auto|size=4","","fsk.baud_cval",fsk.baud_cval,"fsk_baud_custom_cb")),w3_select("|color:red","","framing","fsk.framing",fsk.framing,fsk_framing_s,"fsk_framing_cb"),w3_select("|color:red","","encoding","fsk.encoding",fsk.encoding,fsk_encoding_s,"fsk_encoding_cb"),w3_checkbox("w3-label-inline w3-label-not-bold/","inverted","fsk.inverted",fsk.inverted,"fsk_inverted_cb")),w3_inline("/w3-margin-between-16",w3_button("w3-padding-smaller","Next","fsk_next_prev_cb",1),w3_button("w3-padding-smaller","Prev","fsk_next_prev_cb",-1),w3_select("|color:red","","mode","fsk.mode",0,fsk_mode_s,"fsk_mode_cb"),w3_div("",w3_inline("id-fsk-decode/",w3_button("w3-padding-smaller","Clear","fsk_clear_cb",0)),w3_inline("id-fsk-framing w3-hide/w3-margin-between-16",w3_button("w3-padding-smaller","Sample","fsk_sample_cb",0),w3_select("|color:red","","bits/word","fsk.fr_bpw",0,"5:15","fsk_bpw_cb"),w3_select("|color:red","","phase","fsk.fr_phase",0,"0:15","fsk_phase_cb"),w3_select("|color:red","","bits/data","fsk.fr_bpw",0,fsk_bpd_s,"fsk_bpd_cb")),w3_inline("id-fsk-scope w3-hide/w3-margin-between-16",w3_button("w3-padding-smaller","Single","fsk_single_cb",0),w3_select("|color:red","","decim","fsk.decim",3,fsk_decim_s,"fsk_decim_cb"))))));if(ext_panel_show(e,f,null),time_display_setup("fsk"),fsk.url_params&&(s=fsk.url_params.split(",")).forEach(function(s,f){w3_ext_param("help",s).match&&extint_help_click()}),fsk_setup(),fsk.canvas=w3_el("id-fsk-canvas"),fsk.canvas.ctx=fsk.canvas.getContext("2d"),fsk_baud_error_init(),ext_set_controls_width_height(650,200),fsk.url_params){var t=parseFloat(fsk.url_params);if(!isNaN(t))for(var _=!1,i=0;i<fsk.n_menu;i++){var r="fsk.menu"+i;if(w3_select_enum(r,function(s){_||parseFloat(s.innerHTML)!=t||(fsk_pre_select_cb(r,s.value,!1),_=!0)}),_)break}}fsk.shift_custom&&fsk_shift_custom_cb("id-fsk-shift-custom",fsk.shift),fsk.baud_custom&&fsk_baud_custom_cb("id-fsk-baud-custom",fsk.baud),ext_register_audio_data_cb(fsk_audio_data_cb)}function fsk_setup(){fsk.freq=ext_get_freq()/1e3,fsk.baud_mult=fsk.framing.endsWith(".5")?2:1;var s=fsk.baud*fsk.baud_mult;fsk.jnx.setup_values(ext_sample_rate(),fsk.cf,fsk.shift,s,fsk.framing,fsk.inverted,fsk.encoding),fsk.encoder=fsk.jnx.get_encoding_obj();var f=ext_get_zoom();ext_tune(fsk.freq,"cw",ext_zoom.ABS,f);var e=Math.max(fsk.shift,fsk.baud)/2;e+=10*Math.round((.2*e+10)/10),ext_set_passband(fsk.cf-e,fsk.cf+e),ext_tune(fsk.freq,"cw",ext_zoom.ABS,f);var t=fsk.shift_custom?"custom":fsk.shift;w3_select_set_if_includes("fsk.shift_i","\\b"+t+"\\b");s=fsk.baud_custom?"custom":fsk.baud;w3_select_set_if_includes("fsk.baud_i","\\b"+s+"\\b"),w3_select_set_if_includes("fsk.framing","\\b"+fsk.framing+"\\b"),w3_select_set_if_includes("fsk.encoding","\\b"+fsk.encoding+"\\b"),w3_checkbox_set("fsk.inverted",fsk.inverted),fsk_crosshairs(1)}function fsk_crosshairs(s){var f=canvas_annotation.ctx;if(f.clearRect(0,0,window.innerWidth,24),s&&ext_get_zoom()>=10)for(var e=ext_get_freq(),t=get_visible_freq_range(),_=scale_px_from_freq(e-fsk.shift/2,t),i=scale_px_from_freq(e+fsk.shift/2,t),r=0;r<6;r++){var n=3*r;f.fillStyle=1&r?"black":"white",f.fillRect(_-3,n,3,3),f.fillRect(i-3,n,3,3),f.fillStyle=1&r?"white":"black",f.fillRect(_,n,3,3),f.fillRect(i,n,3,3)}}function fsk_pre_select_cb(s,f,e){if(!e){f=+f;var t=parseInt(s.split("fsk.menu")[1]);w3_select_enum(s,function(e){if(e.disabled&&(fsk.header=e.innerHTML),e.value==f){fsk.menu_sel=e.innerHTML+" ";var _=e.id.split("id-")[1],i=(_=_.split("-"))[0],r=_[1],n=w3_obj_seq_el(fsk_menus[t],i);if(n=w3_obj_seq_el(n,r),"Test mode"==fsk.header)fsk.test_mode=!0,console.log("test mode");else{fsk.test_mode=!1,fsk.framing=n.fr,fsk.freq=parseFloat(n.f)+("CHU"==fsk.framing?fsk.CHU_offset:0),fsk.cf=n.hasOwnProperty("cf")?n.cf:1e3,fsk.shift=n.s,fsk.baud=n.b,fsk.shift_custom=fsk.baud_custom=!1,fsk.inverted=n.i,fsk.encoding=n.e;var a=Math.min(ext_get_zoom(),12);ext_tune(fsk.freq,"cw",ext_zoom.ABS,a),fsk_setup(),w3_select_value(s,f)}w3_el("id-fsk-station").innerHTML="<b>Station: "+fsk_menu_s[t]+", "+fsk.header+"</b>"}});for(var _=0;_<fsk.n_menu;_++)_!=t&&w3_select_value("fsk.menu"+_,-1)}}function fsk_environment_changed(s){fsk_crosshairs(1);var f=ext_get_freq()/1e3,e=ext_get_mode();if(fsk.freq!=f||"cw"!=e){for(var t=0;t<fsk.n_menu;t++)w3_select_value("fsk.menu"+t,-1);fsk.menu_sel="",w3_el("id-fsk-station").innerHTML="&nbsp;"}}function fsk_shift_cb(s,f,e){var t=fsk_shift_s[+f],_=f==fsk.SHIFT_CUSTOM_IDX;w3_show_hide("id-fsk-shift-custom",_),_?(fsk.shift=w3_get_value("id-fsk-shift-custom"),fsk.shift_custom=!0):(fsk.shift=+t,fsk.shift_custom=!1),fsk_setup()}function fsk_shift_custom_cb(s,f){var e=parseFloat(f);!e||isNaN(e)||e<=0||e>5e3||(w3_set_value(s,e),fsk.shift_cval=fsk.shift=e,fsk.shift_custom=!0,w3_show_hide("id-fsk-shift-custom",!0),fsk_setup())}function fsk_baud_cb(s,f,e){var t=fsk_baud_s[+f],_=f==fsk.BAUD_CUSTOM_IDX;w3_show_hide("id-fsk-baud-custom",_),_?(fsk.baud=w3_get_value("id-fsk-baud-custom"),fsk.baud_custom=!0):(fsk.baud=+t,fsk.baud_custom=!1),fsk_setup()}function fsk_baud_custom_cb(s,f){var e=parseFloat(f);!e||isNaN(e)||e<=0||e>5e3||(w3_set_value(s,e),fsk.baud_cval=fsk.baud=e,fsk.baud_custom=!0,w3_show_hide("id-fsk-baud-custom",!0),fsk_setup())}function fsk_framing_cb(s,f,e){if(!e){var t=fsk_framing_s[f];"custom"!=t&&(fsk.framing=t),fsk_setup()}}function fsk_encoding_cb(s,f,e){if(!e){var t=fsk_encoding_s[f];"custom"!=t&&(fsk.encoding=t),fsk_setup()}}function fsk_inverted_cb(s,f,e){e||(f=f?1:0,fsk.inverted=f,w3_checkbox_set(s,f),fsk_setup())}function fsk_next_prev_cb(s,f,e){f=+f;for(var t,_=0,i=0,r=0,n=0,a=0;a<fsk.n_menu;a++){t="fsk.menu"+a;var k=w3_el(t).value;if(-1!=k){w3_select_enum(t,function(s){s.disabled||(i&&(r=s.value,i=0),s.value===k&&(n=_,i=1),_=s.value)});break}}k=0,1==f&&r&&(k=r),-1==f&&n&&(k=n),k&&fsk_pre_select_cb(t,k,!1)}function fsk_mode_cb(s,f,e){if(!e){switch(f=+f,fsk.decode=fsk.scope=fsk.show_framing=0,f){case 0:default:fsk.decode=1;break;case 1:fsk.scope=1,fsk.run=1,fsk_scope_reset_display();break;case 2:fsk.show_framing=1,fsk_framing_reset()}fsk.jnx.set_scope_cb(fsk.scope?fsk_scope:null),fsk.jnx.set_output_bit_cb(fsk.show_framing?fsk_framing:null),w3_show_hide_inline("id-fsk-decode",fsk.decode),w3_show_hide_inline("id-fsk-console-msg",fsk.decode),w3_show_hide_inline("id-fsk-scope",fsk.scope),w3_show_hide_inline("id-fsk-framing",fsk.show_framing)}}function fsk_clear_cb(s,f,e){fsk_console_status_msg_p.s=encodeURIComponent("\f"),kiwi_output_msg("id-fsk-console-msgs","id-fsk-console-msg",fsk_console_status_msg_p)}function fsk_single_cb(s,f,e){e||(fsk.single&&(fsk.run=1),fsk.single^=1,w3_innerHTML(s,fsk.single?"Run":"Single"))}function fsk_sample_cb(s,f,e){e||fsk_framing_reset()}function fsk_decim_cb(s,f,e){e||(fsk.decim=[1,2,4,8,16,32][f])}function fsk_bpw_cb(s,f,e){if(!e&&(fsk.fr_bpw=[5,6,7,8,9,10,11,12,13,14,15][f],fsk.fr_bits.length)){fsk_framing_reset_display();for(var t=0;t<fsk.fr_bits.length-fsk.fr_phase;t++)fsk_framing_proc(fsk.fr_bits[t+fsk.fr_phase])}}function fsk_phase_cb(s,f,e){e||(fsk.fr_phase=+f,fsk_phase())}function fsk_bpd_cb(s,f,e){e||(fsk.fr_bpd=[0,5,6,7,8][f],fsk_phase())}function fsk_blur(){ext_unregister_audio_data_cb(),ext_set_passband(fsk.saved_passband.low,fsk.saved_passband.high),fsk_crosshairs(0)}function fsk_help(s){if(s){var f=w3_text("w3-medium w3-bold w3-text-aqua","FSK decoder help")+"<br>Decoding FSK is not always easy because of the many signal parameters involved. <br>Try the stations listed in the menus. Most of these are best heard from Kiwis in Europe. <br><br>The frequency shift can be set by zooming in sufficiently, centering the passband between <br>the two tones, and selecting a menu shift (or setting a custom shift) so that the <br>checkered crosshairs align on the tones. The scope and framing modes are to assist in setting the correct baud rate and framing. <br><br>URL parameters: <br>First parameter can be a frequency matching an entry in station menus. <br>shift:<i>num</i> &nbsp; baud:<i>num</i> &nbsp; framing:<i>value</i> &nbsp; encoding:<i>value</i> &nbsp; inverted<i>[:0|1]</i> <br>Values are those appearing in their respective menus. <br>Any number for shift and baud can be used. Not just the preset values in the menus. <br>Keywords are case-insensitive and can be abbreviated. <br>So for example this is valid: <i>&ext=fsk,147.3,s:425,b:200,a,i:0</i> <br>";confirmation_show_content(f,610,300)}return!0}