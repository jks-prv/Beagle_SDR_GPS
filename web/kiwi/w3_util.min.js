

/* web/kiwi/w3_util.min.js (web/kiwi/w3_util.js = Sun Sep  8 12:28:22 2024) */
var w3={_last_:0};var w3int={btn_grp_uniq:0,menu_cur_id:null,menu_active:false,menu_debug:false,menu_close_func:null,prev_menu_hover_el:null,reload_timeout:null,reload_seq:0,rate_limit:{},rate_limit_need_shift:{},rate_limit_evt:{},eventListener:[],_last_:0};function visible_block(){}
var w3_console={};w3_console.log=function(obj,prefix){var s=prefix?(prefix+': '):'';if(isString(obj)){s+='"'+obj.toString()+'"';}else
if(isObject(obj)){console.log(obj);var json='JSON '+JSON.stringify(obj,w3int_console_replacer);if(json.includes('\n'))
json=JSON.stringify(obj,w3int_console_replacer,1);s+=json;}else{s+=obj.toString();}
console.log(s);};function w3int_console_replacer(k,v){if(isUndefined(v))return'<undefined>';if(isNull(v))return'<null>';if(isFunction(v))return'<function>';return'<'+v.toString()+'>';}
function w3_json_to_string_no_decode(id,s){s=s.replace(/\\"/g,'"');return s;}
function w3_json_to_string(id,s){s=kiwi_decodeURIComponent(id,s);return w3_json_to_string_no_decode(id,s);}
function w3_json_to_html_no_decode(id,s){s=s.replace(/\\n/g,'<br>').replace(/\n/g,'<br>').replace(/\\"/g,'"');return s;}
function w3_json_to_html(id,s){s=kiwi_decodeURIComponent(id,s);return w3_json_to_html_no_decode(id,s);}
function w3_html_to_nl(s){return s.replace(/<br>/g,'\n').replace(/\\n/g,'\n');}
function w3_strip_quotes(s){if(isString(s)&&(s.indexOf('\'')!=-1||s.indexOf('\"')!=-1))
return s.replace(/'/g,'').replace(/"/g,'')+' [quotes stripped]';return s;}
function w3_esc_dq(s){if(isString(s)&&s.indexOf('\"')!=-1)
return s.replace(/"/g,'&quot;');return s;}
function w3_call(func,arg0,arg1,arg2,arg3,arg4){var rv;if(isNoArg(func))return rv;try{if(isString(func)){var f=getVarFromString(func);if(isFunction(f)){rv=f(arg0,arg1,arg2,arg3,arg4);}else{}}else
if(isFunction(func)){rv=func(arg0,arg1,arg2,arg3,arg4);}else{console.log('w3_call: func not a string or function');console.log(JSON.stringify(func));}}catch(ex){console.log('w3_call: while in func this exception occured:');console.log(ex);}
return rv;}
function w3_first_value(v){if(v==null)
return'null';var rv=null;var to_v=typeof(v);if(to_v==='number'||to_v==='boolean'||to_v==='string'){rv=v;}else
if(isArray(v)){rv=v[0];}else
if(to_v==='object'){rv=w3_obj_seq_el(v,0);}else{rv=to_v;}
return rv;}
function w3_second_value(v){var rv=null;if(isArray(v)&&v.length>1){if(v.length>1)
rv=v[1];}
return rv;}
function w3_opt(opt,elem,default_val,pre,post){var s;if(isArg(opt)&&isDefined(opt[elem])){s=opt[elem];}else{s=default_val;}
if(isNonEmptyString(s)){if(isNonEmptyString(pre))s=pre+s;if(isNonEmptyString(post))s=s+post;}
return s;}
function w3_obj_num(o){if(isUndefined(o)||isNull(o)||isObject(o))return o;if(isNumber(o))return{num:o};if(isBoolean(o))return{num:(o?1:0)};if(isString(o))return{num:parseFloat(o)};return o;}
function w3_obj_seq_el(obj,idx){var keys_a=Object.keys(obj);if(!isNumber(idx)||idx<0||idx>=keys_a.length)return null;return obj[keys_a[idx]];}
function w3_obj_key_seq(obj,key){var seq=null;Object.keys(obj).forEach(function(_key,i){if(_key==key)seq=i;});return seq;}
function w3_array_el_seq(arr,el){var seq=null;arr.forEach(function(a_el,i){if(a_el==el)seq=i;});return seq;}
function w3_obj_enum(obj,func,opt){var key_match=w3_opt(opt,'key_match',undefined);var value_match=w3_opt(opt,'value_match',undefined);Object.keys(obj).forEach(function(key,i){var o=obj[key];if(isDefined(key_match)){if(key==key_match)func(key,i,o);}else
if(isDefined(value_match)){if(o==value_match)func(key,i,o);}else{func(key,i,o);}});}
function w3_enum_obj_or_array_of_objs(obj_arr,func){if(isArray(obj_arr)){obj_arr.forEach(function(obj){func(obj);});}else
if(isObject(obj_arr)){func(obj_arr);}}
function w3_ext_param_array_match_str(arr,s,func){var found=false;arr.forEach(function(a_el,i){var el=a_el.toString().toLowerCase();if(!found&&el.startsWith(s)){if(func)func(i,a_el.toString());found=true;}});return found;}
function w3_ext_param_array_match_num(arr,n,func){var found=false;arr.forEach(function(a_el,i){var a_num=parseFloat(a_el);if(!found&&a_num==n){if(func)func(i,n);found=true;}});return found;}
function w3_ext_param(s,param){var rv={match:false,full_match:false,has_value:false};var pu=param.split(':');var pl=param.toLowerCase().split(':');if(isNull(s)||s.startsWith(pl[0])){rv.match=true;if(isNull(s)){rv.has_value=true;rv.num=parseFloat(param);rv.string=param;rv.string_case=param;rv.items=[];}else
if(pl.length>1){rv.has_value=true;rv.num=parseFloat(pl[1]);rv.string=pl[1];rv.string_case=pu[1];rv.items=pu;}else{rv.num=0;rv.string=rv.string_case='';rv.items=[];}}
if(s&&s==pl[0])rv.full_match=true;return rv;}
function w3_clamp(v,min,max,clamp_val){if(isNaN(v))return(isDefined(clamp_val)?clamp_val:NaN);if(isObject(min)){var o=min;try{if(typeof(o.clamp)==='undefined'){v=Math.max(o.min,Math.min(o.max,v));}else{if(v<o.min||v>o.max)v=o.clamp;}}catch(ex){console.log('w3_clamp: bad obj:');console.log(o);return undefined;}}else{if(clamp_val==undefined)
v=Math.max(min,Math.min(max,v));else
if(v<min||v>max)v=clamp_val;}
return v;}
function w3_clamp3(v,min,max,clamp_min,clamp_max,clamp_NaN){if(isUndefined(clamp_min))clamp_min=NaN;if(isUndefined(clamp_max))clamp_max=NaN;if(isUndefined(clamp_NaN))clamp_NaN=NaN;if(isNaN(v))return clamp_NaN;if(v<min)return clamp_min;if(v>max)return clamp_max;return v;}
function w3_add_id(path,suffix){if(!isString(path))return path;path=path||'';if(path==''||path=='body')return path;path=path.startsWith('id-')?path:('id-'+path);suffix=suffix||'';return path+suffix;}
function w3int_w3_el(id_name_class){if(!id_name_class||id_name_class=='')return null;var el=document.getElementById(id_name_class);if(el==null){el=document.getElementsByName(id_name_class);if(el!=null)el=el[0];}
if(el==null){el=document.getElementsByClassName(id_name_class);if(el!=null)el=el[0];}
return el;}
function w3int_w3_els(id_name_class){if(!id_name_class||id_name_class=='')return null;var els=document.getElementById(id_name_class);var rv;if(els!=null){rv=[els];}else{els=document.getElementsByName(id_name_class);if(els==null||els.length==0){els=document.getElementsByClassName(id_name_class);}
rv=els;}
if(rv.length==0)rv=null;return rv;}
function w3_el(el_id){if(isString(el_id)){if(el_id=='')return null;if(el_id=='body')return document.body;var el=w3int_w3_el(el_id);if(el==null){el=w3int_w3_el(w3_add_id(el_id));if(el==null){el_id=w3_add_toplevel(el_id);el=w3int_w3_el(el_id);if(el==null){el=w3int_w3_el(w3_add_id(el_id));}}}
return el;}
return(el_id);}
function w3_els(el_id,func){if(isString(el_id)){if(el_id=='')return null;if(el_id=='body')return document.body;var els=w3int_w3_els(el_id);if(els==null){els=w3int_w3_els(w3_add_id(el_id));if(els==null){el_id=w3_add_toplevel(el_id);els=w3int_w3_els(el_id);if(els==null){els=w3int_w3_els(w3_add_id(el_id));}}}
if(els&&func)for(var i=0;i<els.length;i++){func(els[i],i);}
return els;}
var el=w3_el(el_id);if(func){func(el,0);}
return[el];}
function w3_id(el_id){var el=w3_el(el_id);if(!el)return'id-NULL';if(el.id&&el.id.startsWith('id-'))return el.id;var done=false;var id=null;w3_iterate_classList(el,function(className,idx){if(className.startsWith('id-')&&!done){id=className;done=true;}});return(id?id:'id-NULL');}
function w3_innerHTML(id){var el=w3_el(id);if(!el)return null;if(arguments.length==1)
return el.innerHTML;var s='';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
el.innerHTML=s;return el;}
function w3_clearInnerHTML(id){w3_innerHTML(id,'');}
function w3_append_innerHTML(id){var el=w3_el(id);if(!el)return null;var s='';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
el.innerHTML+=s;return el;}
function w3_get_innerHTML(id){var el=w3_el(id);if(!el)return null;return el.innerHTML;}
function w3_iterate_classname(cname,func){var els=document.getElementsByClassName(w3_add_id(cname));if(els==null)return;for(var i=0;i<els.length;i++){func(els[i],i);}}
function w3_iterate_classList(el_id,func){var el=w3_el(el_id);if(el&&el.classList)for(var i=0;i<el.classList.length;i++){func(el.classList.item(i),i);}
return el;}
function w3_create_appendElement(el_parent,el_type,html){var el_child=document.createElement(el_type);w3_innerHTML(el_child,html);w3_el(el_parent).appendChild(el_child);return el_child;}
function w3_iterate_parent(el_id,func){var el=w3_el(el_id);var i=0;do{if(func(el,i)!=null)
break;el=el.parentNode;i++;}while(el);}
function w3_iterate_children(el_id,func){var el=w3_el(w3_add_id(el_id));for(var i=0;i<el.children.length;i++){var child_el=el.children[i];func(child_el,i);}}
function w3_iterateDeep_children(el_id,func,level){var el=w3_el(el_id);if(isUndefined(level))level=0;for(var i=0;i<el.children.length;i++){var child_el=el.children[i];func(child_el,level,i);if(child_el.hasChildNodes)
w3_iterateDeep_children(child_el,func,level+1);}}
function w3_iterate_childNodes(el_id,func){var el=w3_el(el_id);for(var i=0;i<el.childNodes.length;i++){var child_el=el.childNodes[i];func(child_el,i);}}
function w3_width_height(el_id,w,h){var el=w3_el(el_id);if(!el)return null;if(isArg(w)){if(isNumber(w))w=px(w);el.style.width=w;}
if(isArg(h)){if(isNumber(h))h=px(h);el.style.height=h;}}
function w3_boundingBox_children(el_id,debug){var el=w3_el(el_id);var bbox={id:el_id,x1:1e99,x2:0,y1:1e99,y2:0,w:0,h:0};var found=false;w3_iterateDeep_children(el_id,function(el,level,i){if(el.nodeName!='DIV'&&el.nodeName!='SPAN'&&el.nodeName!='IMG')
return;var position=css_style(el,'position');if(position=='static')
return;if(el.offsetHeight==0)
return;if(debug)console.log('level='+level+' i='+i);if(debug)console.log(el);if(!found){bbox.el=el;found=true;}
if(debug)console.log(el.nodeName+' el.oL='+el.offsetLeft+' el.oW='+el.offsetWidth+' el.oT='+el.offsetTop+' el.oH='+el.offsetHeight+' '+position);bbox.x1=Math.min(bbox.x1,el.offsetLeft);var x2=el.offsetLeft+el.offsetWidth;bbox.x2=Math.max(bbox.x2,x2);bbox.y1=Math.min(bbox.y1,el.offsetTop);var y2=el.offsetTop+el.offsetHeight;bbox.y2=Math.max(bbox.y2,y2);});bbox.w=bbox.x2-bbox.x1;bbox.h=bbox.y2-bbox.y1;if(bbox.w==-1e+99){bbox.w=bbox.h=0;}
if(debug)console.log(bbox);return bbox;}
function w3_center_in_window(el_id,id){var el=w3_el(el_id);var rv=(window.innerHeight-el.clientHeight)/ 2;return rv;}
function w3_field_select(el_id,opts){var el=w3_el(el_id);el=(el&&isFunction(el.select))?el:null;var trace=opts['trace'];if(trace){var id=isObject(el_id)?el_id.id:el_id;console.log('w3_field_select id='+id+' el='+el+' v='+(el?el.value:null));console.log(el);console.log(opts);}
if(!el)return;var focus=0,select=0,blur=0;if(opts['mobile']&&kiwi_isMobile())blur=1;else focus=select=1;if(opts['blur'])blur=1;if(opts['focus_select'])focus=select=1;if(opts['focus_only']){focus=1;select=0;}
if(opts['select_only'])select=1;if(trace)console.log('w3_field_select focus='+focus+' select='+select+' blur='+blur);if(focus)el.focus();if(select)el.select();if(blur)el.blur();if(trace)kiwi_trace();}
function w3_add(el_id,props){if(!el_id)return null;var first_el=null;var el=w3_el(el_id);if(!el)return null;if(first_el)return;if(!el||!props)return null;props=props.replace(/\s+/g,' ').split(' ');props.forEach(function(p){el.classList.add(p);});if(!first_el)first_el=el;return first_el;}
function w3_remove(el_id,props){if(!el_id)return null;var first_el=null;var el=w3_el(el_id);if(!el)return null;if(!first_el)first_el=el;if(!el||!props)return null;props=props.replace(/\s+/g,' ').split(' ');props.forEach(function(p){el.classList.remove(p);});return first_el;}
function w3_match_wildcard(el_id,prefix){var el=w3_el(el_id);if(!el)return null;for(var i=0;i<el.classList.length;i++){var cl=el.classList.item(i);if(cl.startsWith(prefix))
return cl;}
return false;}
function w3_remove_wildcard(el_id,prefix){var el=w3_el(el_id);if(!el)return null;for(var i=0;i<el.classList.length;i++){var cl=el.classList.item(i);if(cl.startsWith(prefix))el.classList.remove(cl);}
return el;}
function w3_set_props(el_id,props,cond){var el=w3_el(el_id);if(!el)return el;cond=isArg(cond)?cond:true;if(cond)
w3_add(el,props);else
w3_remove(el,props);return el;}
function w3_remove_then_add(el_id,r_props,a_props){w3_remove(el_id,r_props);w3_add(el_id,a_props);}
function w3_remove_then_add_cond(el_id,cond,t_props,f_props){w3_remove(el_id,t_props+' '+f_props);w3_add(el_id,cond?t_props:f_props);}
function w3_contains(el_id,prop){var el=w3_el(el_id);if(!el)return 0;var clist=el.classList;return(!clist||!clist.contains(prop))?0:1;}
function w3_parent_with(el_id,prop){var el=w3_el(el_id);if(!el)return;var found=null;w3_iterate_parent(el,function(parent){if(!found&&w3_contains(parent,prop)){found=parent;}});return found;}
function w3_toggle(el_id,prop){var el=w3_el(el_id);if(!el)return;if(w3_contains(el,prop)){w3_remove(el,prop);}else{w3_add(el,prop);}
return el;}
function w3_appendAllClass(cname,prop){w3_iterate_classname(cname,function(el){el.classList.add(prop);});}
function w3_setAllHref(cname,href){w3_iterate_classname(cname,function(el){el.href=href;});}
function w3_show(el_id,display){var el=w3_el(el_id);if(!el)return el;w3_remove(el,'w3-hide');w3_add(el,display?display:'w3-show-inline-block');return el;}
function w3_create_attribute(el_id,name,val){var el=w3_el(el_id);if(el==null)return;var attr=document.createAttribute(name);attr.value=val;el.setAttributeNode(attr);}
function w3_attribute(el_id,name,val,cond){var el=w3_el(el_id);if(el==null)return null;if(isUndefined(cond)||cond==true)
el.setAttribute(name,val);else
el.removeAttribute(name);}
function w3_show_block(el_id){return w3_show(el_id,'w3-show-block');}
function w3_show_inline_block(el_id){return w3_show(el_id,'w3-show-inline-block');}
function w3_show_inline(el_id){return w3_show(el_id,'w3-show-inline-new');}
function w3_show_table_cell(el_id){return w3_show(el_id,'w3-show-table-cell');}
function w3_hide(el_id){var el=w3_el(el_id);if(!el)return el;el=w3_iterate_classList(el,function(className,idx){if(className.startsWith('w3-show-')){w3_remove(el,className);}});w3_add(el,'w3-hide');return el;}
function w3_hide2(el_id,cond){var el=w3_el(el_id);if(!el)return el;cond=isArg(cond)?cond:true;w3_set_props(el,'w3-hide',cond);return el;}
function w3_show_hide(el_id,show,display,n_parents_up){var rv;var el=w3_el(el_id);if(isNumber(n_parents_up))
for(var i=0;i<n_parents_up;i++)el=el.parentElement;if(show){rv=w3_show(el,display?display:'w3-show-block');}else{rv=w3_hide(el);}
return rv;}
function w3_show_hide_inline(el,show){w3_show_hide(el,show,'w3-show-inline-new');}
function w3_disable(el_id,disable){el=w3_el(el_id);w3_set_props(el,'w3-disabled',disable);if(isDefined(el.nodeName)&&(el.nodeName=='SELECT'||el.nodeName=='INPUT')){try{if(disable)
el.setAttribute('disabled','');else
el.removeAttribute('disabled');}catch(ex){console.log('w3_disable:Attribute');console.log(ex);}}
return el;}
function w3_disable_multi(el_id,disable){w3_els(el_id,function(el,i){w3_set_props(el,'w3-disabled',disable);if(isDefined(el.nodeName)&&(el.nodeName=='SELECT'||el.nodeName=='INPUT')){try{if(disable)
el.setAttribute('disabled','');else
el.removeAttribute('disabled');}catch(ex){console.log('w3_disable:Attribute');console.log(ex);}}});}
function w3_visible(el_id,visible){var el=w3_el(el_id);el.style.visibility=visible?'visible':'hidden';return el;}
function w3_isVisible(el_id){var el=w3_el(el_id);if(!el)return null;return(el.style.visibility=='visible');}
var w3_highlight_time=250;var w3_highlight_color='w3-selection-green';var w3_selection_green='#4CAF50';function w3_highlight(el_id){var el=w3_el(el_id);w3_add(el,el.w3int_highlight_color||w3_highlight_color);}
function w3_unhighlight(el_id){var el=w3_el(el_id);w3_remove(el,el.w3int_highlight_color||w3_highlight_color);}
function w3_isHighlighted(el_id){var el=w3_el(el_id);return w3_contains(el,el.w3int_highlight_color||w3_highlight_color);}
function w3_schedule_highlight(el_id){var el=w3_el(el_id);w3_highlight(el);setTimeout(function(){w3_unhighlight(el);},w3_highlight_time);}
function w3_set_highlight_color(el_id,color){var el=w3_el(el_id);if(!el)return null;if(w3_isHighlighted(el)){w3_unhighlight(el);el.w3int_highlight_color=color;w3_highlight(el);}else{el.w3int_highlight_color=color;}
return el;}
var w3_flag_color='w3-override-yellow';function w3_flag(path){w3_add(w3_el(path),w3_flag_color);}
function w3_unflag(path){w3_remove(w3_el(path),w3_flag_color);}
function w3_color(el_id,color,bkgColor,cond){var el=w3_el(el_id);if(!el)return null;var prev_fg=el.style.color;var prev_bg=el.style.backgroundColor;cond=(isUndefined(cond)||cond);if(isArg(color))el.style.color=cond?color:'';if(isArg(bkgColor))el.style.backgroundColor=cond?bkgColor:'';return{color:prev_fg,backgroundColor:prev_bg};}
function w3_background_color(el_id,color){var el=w3_el(el_id);var prev=el.style.backgroundColor;if(color!=undefined&&color!=null)el.style.backgroundColor=color;return prev;}
function w3_colors(el_id,c1,c2,cond){var el=w3_el(el_id);if(!el)return null;cond=isArg(cond)?cond:true;var fg1=null,bg1=null;if(isArray(c1)){if(c1.length>0)fg1=c1[0];if(c1.length>1)bg1=c1[1];}else
if(isString(c1)){fg1=c1;}else{return null;}
if(fg1.startsWith('w3-')){w3_remove(el,fg1);if(!cond)w3_add(el,fg1);}else{if(!cond)el.style.color=fg1;}
if(bg1){el.style.backgroundColor=bg1;}
var fg2=null,bg2=null;if(isArray(c2)){if(c2.length>0)fg2=c2[0];if(c2.length>1)bg2=c2[1];}else
if(isString(c2)){fg2=c2;}else{return null;}
if(fg2.startsWith('w3-')){w3_remove(el,fg2);if(cond)w3_add(el,fg2);}else{if(cond)el.style.color=fg2;}
if(bg2){el.style.backgroundColor=bg2;}}
function w3_flip_colors(el_id,colors,cond){var el=w3_el(el_id);if(!el)return null;var ar=colors?colors.split(' '):null;if(!ar||ar.length!=2)return null;w3_remove(el,ar[0]);w3_remove(el,ar[1]);w3_add(el,ar[cond?1:0]);}
function w3_fg_color_with_opacity_against_bk_color(fg,opacity,bg){var fg_color=w3color(fg);if(!fg_color.valid)return null;var bg_color=w3color(bg);if(!bg_color.valid)return null;var _opacity=1-opacity;var red=Math.round(opacity*fg_color.red+_opacity*bg_color.red);var green=Math.round(opacity*fg_color.green+_opacity*bg_color.green);var blue=Math.round(opacity*fg_color.blue+_opacity*bg_color.blue);return w3color(kiwi_rgb(red,green,blue));}
function w3_opacity(el_id,opacity){var el=w3_el(el_id);if(!el)return null;el.style.opacity=opacity;}
function w3_flash_fade(el_id,color,dwell_ms,fade_ms,color2){var el=w3_el(el_id);if(!el)return el;el.style.transition='background 0s';el.style.background=color;setTimeout(function(){el.style.transition='background '+(fade_ms?(fade_ms/1000):0.3)+'s linear';el.style.background=isString(color2)?color2:'black';},dwell_ms?dwell_ms:50);return el;}
function w3_fillText_shadow(canvas,text,x,y,font,fontSize,color,opts){var strokeWidth=w3_opt(opts,'stroke',Math.floor(fontSize / 3));var ctx=canvas.getContext("2d");ctx.font=px(fontSize)+' '+font;ctx.miterLimit=2;ctx.lineJoin="circle";var tw=ctx.measureText(text).width;if(!w3_opt(opts,'left'))x-=tw/2;ctx.strokeStyle="black";ctx.lineWidth=strokeWidth;ctx.strokeText(text,x,y);ctx.fillStyle=color;ctx.lineWidth=1;ctx.fillText(text,x,y);}
function w3_fillText(ctx,x,y,text,color,opts){color=color||'black';ctx.fillStyle=color;var font=w3_opt(opts,'font');if(isDefined(font))ctx.font=font;var lineWidth=w3_opt(opts,'lineWidth');if(isDefined(lineWidth))ctx.lineWidth=lineWidth;var align=w3_opt(opts,'align');if(isDefined(align))ctx.textAlign=align;var baseline=w3_opt(opts,'baseline');if(isDefined(baseline))ctx.textBaseline=baseline;var tw=ctx.measureText(text).width;if(!w3_opt(opts,'left'))x-=tw/2;ctx.fillText(text,x,y);}
function w3_check_restart_reboot(el_id){var el=w3_el(el_id);if(!el)return;w3_iterate_parent(el,function(el){if(w3_contains(el,'w3-restart')){w3_restart_cb();return el;}
if(w3_contains(el,'w3-reboot')){w3_reboot_cb();return el;}
return null;});}
function w3_check_cfg_reload(el_id){if(!isAdmin())return;var el=w3_el(el_id);if(!el||!w3_contains(el,'w3-cfg-restart'))return;kiwi_clearTimeout(w3int.reload_timeout);w3int.reload_timeout=setTimeout(function(){w3int.update_seq++;ext_send('ADM reload_cfg');console.log('w3 reload_cfg');},5000);}
function w3_set_value(path,val){path=w3_add_id(path);if(1){w3_els(path,function(el){if(el)el.value=val;});}else{var el=w3_el(path);if(el)el.value=val;}}
function w3_set_decoded_value(path,val){w3_set_value(path,kiwi_decodeURIComponent('w3_set_decoded_value:'+path,val));}
function w3_get_value(path){var el=w3_el(path);if(!el)return null;return el.value;}
function w3_add_toplevel(path){if(!path.startsWith('cfg.')&&!path.startsWith('adm.'))
return'cfg.'+path;return path;}
function w3_not_toplevel(path){if(path.startsWith('cfg.')||path.startsWith('adm.'))
return path.substr(path.indexOf('.')+1);return path;}
function w3_basename(path){var i=path.lastIndexOf('.');if(i>=0){return path.substr(i+1);}
return path;}
function w3_psa3(psa3){psa3=psa3||'';a=psa3.split('/');var a0=(a[0]||'').replace(/&slash;/g,'/');var a1=(a[1]||'').replace(/&slash;/g,'/');var a2=(a[2]||'').replace(/&slash;/g,'/');if(a.length==1)
return{left:'',middle:'',right:a0};else
if(a.length==2)
return{left:'',middle:a0,right:a1};else
if(a.length==3)
return{left:a0,middle:a1,right:a2};else
return{left:'',middle:'',right:''};}
function w3_sb(){var a=[];for(var i=0;i<arguments.length;i++){var s=arguments[i];s=isString(s)?s.trim():(isNumber(s)?s.toString():'');if(s!='')a.push(s);}
return a.length?a.join(' '):'';}
function w3_sbc(c){var a=[];for(var i=1;i<arguments.length;i++){var s=arguments[i];s=isString(s)?s.trim():(isNumber(s)?s.toString():'');if(s!='')a.push(s);}
return a.length?a.join(c):'';}
function w3_sbew(ew){var a=[];for(var i=1;i<arguments.length;i++){var s=arguments[i];s=isString(s)?s.trim():(isNumber(s)?s.toString():'');if(s!=''){if(s[s.length-1]!=ew)s=s+ew;a.push(s);}}
return a.length?a.join(' '):'';}
function w3_nl(s){if(isArg(s)&&s!='')s+='\n';return s;}
function w3_br(s){if(isArg(s)&&s!='')s+='<br>';return s;}
function w3_psa(psa,extra_prop,extra_style,extra_attr){if(psa&&psa.includes('w3-dump')){console.log('psa_in=['+psa+']');console.log('extra_prop=['+extra_prop+']');console.log('extra_style=['+extra_style+']');console.log('extra_attr=['+extra_attr+']');}
if(psa&&psa.startsWith('class=')){return psa;}
var a=psa?psa.split('|'):[];psa='';var prop=a[0]||'';if(extra_prop)prop=w3_sb(prop,extra_prop);if(prop!='')psa='class='+dq(prop);var style=a[1]||'';if(extra_style)style=w3_sbew(';',style,extra_style);if(style!='')psa=w3_sb(psa,'style='+dq(style));var attr=(a[2]||'').replace(/&vbar;/g,'|');if(extra_attr)attr=w3_sb(attr,extra_attr);if(attr!='')psa=w3_sb(psa,attr);return psa;}
function w3_psa_mix(psa,extra_prop,extra_style,extra_attr){var dump=psa.includes('w3-dump');if(dump)console.log('--- w3_psa_mix psa='+psa);var a=psa?psa.split('|'):[];var prop=a[0]||'';if(dump)console.log('prop=['+prop+']');if(dump)console.log('extra_prop=['+extra_prop+']');if(extra_prop)prop=w3_sb(prop,extra_prop);if(dump)console.log('mixed prop=['+prop+']');var style=a[1]||'';if(dump)console.log('style=['+style+']');if(dump)console.log('extra_style=['+extra_style+']');if(extra_style)style=w3_sbew(';',style,extra_style);if(dump)console.log('mixed style=['+style+']');var attr=a[2]||'';if(dump)console.log('attr=['+attr+']');if(dump)console.log('extra_attr=['+extra_attr+']');if(extra_attr)attr=w3_sb(attr,extra_attr);if(dump)console.log('mixed attr=['+attr+']');psa=prop+'|'+style+'|'+attr;if(dump)console.log('mix_out=['+psa+']');return psa;}
function w3_set_psa(el,psa){el=w3_el(el);if(!el||isEmptyString(psa))return null;psa=psa.split('/')[0];psa=psa.split('|');var _class=psa[0];var _style=psa[1];var _attr=psa[2];if(isArg(_class))w3_add(el,_class);if(isArg(_style))el.style=_style;}
function w3int_init(){}
function w3int_post_action(){w3_call('freqset_select');}
function w3_copy_to_clipboard(val){var el=document.createElement("input");el.setAttribute('type','text');el.setAttribute('value',val);document.body.appendChild(el);el.select();document.execCommand("copy");document.body.removeChild(el);}
function w3_isScrollingY(id){var el=w3_el(id);if(!el)return null;return(el.scrollHeight>el.clientHeight);}
function w3_isScrollingX(id){var el=w3_el(id);if(!el)return null;return(el.scrollWidth>el.clientWidth);}
function w3_isScrolledDown(id){var el=w3_el(id);if(!el)return null;return(Math.abs(el.scrollHeight-el.clientHeight-el.scrollTop)<1);}
function w3_scrolledPosition(id){var el=w3_el(id);if(!el)return null;if(el.clientHeight==0)return-1;var scrollH=el.scrollHeight-el.clientHeight;if(scrollH<=0)return 0;return el.scrollTop / scrollH;}
function w3_scrollTo(id,pos,jog){var el=w3_el(id);if(!el)return null;var scrollH=el.scrollHeight-el.clientHeight;if(scrollH<0)scrollH=0;var top=scrollH*pos;var unchanged=(top==el.scrollTop);el.scrollTop=top;if(jog==true){el.scrollTop=top+1;el.scrollTop=top;}
return unchanged;}
function w3_scrollDown(id,cond){var el=w3_el(id);if(isArg(cond)?cond:true)el.scrollTop=el.scrollHeight;return el;}
function w3_scrollTop(id,cond){var el=w3_el(id);if(isArg(cond)?cond:true)el.scrollTop=0;return el;}
function w3_do_when_rendered(id,func,arg,poll_ms){var el=w3_el(id);poll_ms=isNumber(poll_ms)?poll_ms:500;rend=isArg(el);if(!rend){setTimeout(function(){w3_do_when_rendered(id,func,arg,poll_ms);},poll_ms);}else{if(isFunction(func))
func(el,arg);}}
function w3_do_when_cond(cond_func,func,arg,poll_ms){poll_ms=isNumber(poll_ms)?poll_ms:500;if(!cond_func(arg)){setTimeout(function(){w3_do_when_cond(cond_func,func,arg,poll_ms);},poll_ms);}else{if(isFunction(func))
func(arg);}}
function w3_elementAtPointer(x,y){if(isObject(x)){var evt=x;x=evt.pageX;y=evt.pageY;}
if(isNumber(x)&&isNumber(y)){return document.elementFromPoint(x,y);}
return null;}
function w3_event_log(el,id,event_name){el=w3_el(el);if(el==null)return;el.addEventListener(event_name,function(){console.log('w3_event_log '+id+': '+event_name);});}
function w3_event_listener(id,el){el=w3_el(el);if(!el)return null;if(!w3int.eventListener[id]){w3_event_log(el,id,'mouseup');w3_event_log(el,id,'mousedown');w3_event_log(el,id,'click');w3_event_log(el,id,'change');w3_event_log(el,id,'submit');w3_event_log(el,id,'focus');w3_event_log(el,id,'blur');w3int.eventListener[id]=true;}}
function w3_hr(psa){var p=w3_psa(psa);var s='<hr '+p+'>';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
return s;}
function w3_click_nav(nav_id,next_id,cb_next,cb_param,from){var next_id_nav=('id-nav-'+next_id).toLowerCase();var cur_id=null;var next_el=null;var cb_prev=null;var found=0;var el=w3_el(nav_id);if(!el)return;w3_iterate_children(el,function(el,i){if(el.nodeName!='A'||found>=2)return;if(w3_contains(el,'w3int-cur-sel')){cur_id=el.id.substring(7);w3_remove(el,'w3int-cur-sel');w3_iterate_classList(el,function(s,i){if(s.startsWith('id-nav-cb-'))
cb_prev=s.substring(10);});found++;}
if(el.id.toLowerCase().startsWith(next_id_nav)){next_id=el.id.split('id-nav-')[1];next_el=el;found++;}});if(cur_id&&cb_prev){w3_call(cb_prev+'_blur',cur_id);}
if(cur_id)
w3_toggle(cur_id,'w3-show-block');if(next_el){w3_add(next_el,'w3int-cur-sel');w3_check_restart_reboot(next_el);}
w3_toggle(next_id,'w3-show-block');if(cb_next!='null'){w3_call(cb_next+'_focus',next_id,cb_param);}}
function w3int_anchor(psa,text,navbar,id,cb,isSelected){if(cb===undefined)cb=id;var nav_cb=cb?('id-nav-cb-'+cb):'';var attr='id="id-nav-'+id+'" onclick="w3_click_nav('+sq(navbar)+', '+sq(id)+', '+sq(cb)+')"';var p=w3_psa(psa,nav_cb+(isSelected?' w3int-cur-sel':''),'',attr);var s='<a '+p+' href="javascript:void(0)">'+text+'</a>';return s;}
function w3_navbar(psa){var p=w3_psa(psa,'w3-navbar');var s='<nav '+p+'>';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
s+='</nav>';return s;}
function w3_sidenav(psa){var p=w3_psa(psa,'w3-sidenav w3-static w3-left w3-sidenav-full-height w3-light-grey');var s='<nav '+p+'>';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
s+='</nav>';return s;}
function w3_nav(psa,text,navbar,id,cb,isSelected){return w3int_anchor(psa,text,navbar,id,cb,isSelected);}
function w3_navdef(psa,text,navbar,id,cb){setTimeout(function(){w3_toggle(id,'w3-show-block');},w3_highlight_time);return w3int_anchor(psa,text,navbar,id,cb,true);}
function w3int_label(psa,text,path,extension){psa=psa||'';text=text||'';extension=extension||'';var dump=psa.includes('w3-dump');if(text==''&&((psa!=''&&psa!='||')||extension!=''))
console_nv('$w3int_label',{text},{psa},{extension});if(text==''){if(dump)console.log('$w3int_label <empty string>');return'';}
if(text.startsWith('<label ')){if(dump)console.log('$w3int_label EMBEDDED '+text);return text;}
var id=w3_add_id(path,'-label');var p=w3_psa(psa,id);var s='<label '+p+'>'+text+extension+'</label>';if(dump)console.log('$w3int_label psa='+psa+' text=<'+text+'> s=<'+s+'>');return s;}
function w3_label(psa,text,path,extension){if(arguments.length>=4){console.log('### w3_label ext='+extension);}
if(isEmptyString(text))text='&nbsp;';return w3int_label(psa,text,path,extension);}
function w3_get_label(label,path){return w3_get_innerHTML(w3_add_id(path,'-label'));}
function w3_set_label(label,path){w3_innerHTML(w3_add_id(path,'-label'),label);}
function w3_title(id,text){var el=w3_el(id);if(!el)return null;w3_attribute(el,'title',text);return el;}
function w3int_link_click(ev,cb,cb_param){var el=ev.currentTarget;w3_check_restart_reboot(el);if(cb){w3_call(cb,el,cb_param,false);}
w3int_post_action();}
function w3_link(psa,url,inner,title,cb,cb_param){var qual_url=url;var href='';var target='';if(url!=''){if(!url.startsWith('javascript:')){if(!url.startsWith('http://')&&!url.startsWith('https://'))
qual_url='http://'+url;target=' target="_blank"';}
href='href='+dq(qual_url)+' ';}
inner=inner||'';title=title||'';if(title!='')title=' title='+dq(title);var pointer=(cb&&cb!='')?'w3-pointer':'';cb_param=cb_param||0;var onclick=cb?(' onclick="w3int_link_click(event, '+sq(cb)+', '+sq(cb_param)+')"'):'';var p=w3_psa(psa,pointer,'',href+target+title+onclick);var esc_html=psa.includes('w3-esc-html');var lt=esc_html?kiwi.esc_lt:'<';var gt=esc_html?kiwi.esc_gt:'>';var s=lt+'a '+p+gt+inner+lt+'/a'+gt;return s;}
function w3_link_set(path,url){var el=w3_el(path);if(el&&url!=''){if(!url.startsWith('http://')&&!url.startsWith('https://'))
url='http://'+url;w3_attribute(el,'href',url);w3_attribute(el,'target','_blank');}}
function w3_img_wh(src,func){var img=new Image();img.onload=function(){func(this.width,this.height);};img.src=src;}
function w3_img(psa,file,width,height){var w=isArg(width)?('width='+width):'';var h=isArg(height)?('height='+height):'';var src='src='+dq(file);var p=w3_psa(psa,null,null,w3_sb(src,w,h));var s='<img '+p+' />';if(psa&&psa.includes('w3-dump'))console.log('w3-dump: '+s);return s;}
var w3_SELECTED=true;var w3_NOT_SELECTED=false;function w3_radio_unhighlight(path){w3_iterate_classname(w3_add_id(path),function(el){w3_unhighlight(el);});}
function w3int_radio_click(ev,path,cb,cb_param){w3_radio_unhighlight(path);w3_highlight(ev.currentTarget);var idx=-1;w3_iterate_classname(w3_add_id(path),function(el,i){if(w3_isHighlighted(el))
idx=i;});w3_check_restart_reboot(ev.currentTarget);if(cb){w3_call(cb,path,idx,false,cb_param);}
w3int_post_action();}
function w3_radio_btn(text,path,isSelected,save_cb,prop){prop=(arguments.length>4)?arguments[4]:null;var _class=' id-'+path+(isSelected?(' '+w3_highlight_color):'')+(prop?(' '+prop):'');var oc='onclick="w3int_radio_click(event, '+sq(path)+', '+sq(save_cb)+')"';var s='<button class="w3-btn w3-ext-btn'+_class+'" '+oc+'>'+text+'</button>';return s;}
function w3_radio_button(psa,text,path,isSelected,cb,cb_param){cb_param=cb_param||0;var onclick=cb?('onclick="w3int_radio_click(event, '+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"'):'';var p=w3_psa(psa,w3_add_id(path)+(isSelected?(' '+w3_highlight_color):'')+' w3-btn w3-ext-btn','',onclick);var s='<button '+p+'>'+text+'</button>';return s;}
function w3_radio_button_get_param(psa,text,path,selected_if_val,init_val,cb,cb_param){var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save);var isSelected=(cur_val==selected_if_val)?w3_SELECTED:w3_NOT_SELECTED;return w3_radio_button(psa,text,path,isSelected,cb,cb_param);}
var w3_SWITCH_YES_IDX=0,w3_SWITCH_NO_IDX=1;function w3_switch_s(idx){return((idx==w3_SWITCH_YES_IDX)?'YES':'NO');}
function w3_switch_val2idx(val){return(val?w3_SWITCH_YES_IDX:w3_SWITCH_NO_IDX);}
function w3_switch_idx2val(idx){return((idx==w3_SWITCH_YES_IDX)?1:0);}
function w3_switch(psa,text_0,text_1,path,text_0_selected,cb,cb_param){var s=w3_radio_button(w3_psa_mix(psa,'w3int-switch-0'),text_0,path,text_0_selected?1:0,cb,cb_param)+
w3_radio_button(w3_psa_mix(psa,'w3int-switch-1'),text_1,path,text_0_selected?0:1,cb,cb_param);return s;}
function w3_switch_label(psa,label,text_0,text_1,path,text_0_selected,cb,cb_param){var hasLabel=(label!='');var inline=psa.includes('w3-label-inline');var centered=psa.includes('w3-center');var left=psa.includes('w3-label-left');var bold=!psa.includes('w3-label-not-bold');var spacing=(hasLabel&&!inline)?'w3-margin-T-8':'';if(hasLabel&&inline)spacing+=left?' w3-margin-L-8':' w3-margin-R-8';if(centered)spacing+=' w3-halign-center';var psa3=w3_psa3(psa);var psa_outer=w3_psa_mix(psa3.left,(inline?'w3-show-inline-new':'')+(centered?' w3-halign-center w3-center':''));var psa_label=w3_psa_mix(psa3.middle,(hasLabel&&bold)?'w3-bold':'');var psa_inner=w3_psa();var ls=w3int_label(psa_label,label,path);var cs=w3_inline(spacing+'/'+psa3.right,w3_radio_button('w3int-switch-0',text_0,path,text_0_selected?1:0,cb,cb_param)+
w3_radio_button('w3int-switch-1',text_1,path,text_0_selected?0:1,cb,cb_param));var s=w3_div(psa_outer,((left||!inline)?(ls+cs):(cs+ls)));return s;}
function w3_switch_get_param(psa,text_0,text_1,path,text_0_selected_if_val,init_val,cb,cb_param){var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save);var text_0_selected=(cur_val==text_0_selected_if_val)?w3_SELECTED:w3_NOT_SELECTED;return w3_switch(psa,text_0,text_1,path,text_0_selected,cb,cb_param);}
function w3_switch_label_get_param(psa,label,text_0,text_1,path,text_0_selected_if_val,init_val,cb,cb_param){var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save);var text_0_selected=(cur_val==text_0_selected_if_val)?w3_SELECTED:w3_NOT_SELECTED;return w3_switch_label(psa,label,text_0,text_1,path,text_0_selected,cb,cb_param);}
function w3_switch_set_value(path,switch_idx){var sw='w3int-switch-'+switch_idx;w3_iterate_classname(path,function(el,i){if(w3_contains(el,sw)){el.click();}});}
function w3int_btn_evt(ev,path,cb,cb_param){if(!w3_contains(path,'w3-disabled')){if(w3int.autorepeat_canceller_path!=null){var diff=(w3int.autorepeat_canceller_path!=path);var same=(w3int.autorepeat_canceller_path==path&&ev.type=='mousedown');if(diff||same){kiwi_clearInterval(w3int.autorepeat_canceller_interval);w3int.autorepeat_canceller_path=null;}}
w3_check_restart_reboot(ev.currentTarget);var el=w3_el(path);var hold=w3_contains(el,'w3-hold');if(hold){if(ev.type=='mousedown'||ev.type=='touchstart'){el.hold_triggered=false;el.hold_timeout=setTimeout(function(){el.hold_triggered=true;if(cb){w3_call(cb,path,cb_param,false,{type:'hold'});}},500);return ignore(ev);}else{if((ev.type=='click'||ev.type=='mouseout'||ev.type=='touchend')&&isArg(el.hold_timeout)){var timeout=el.hold_timeout;var triggered=el.hold_triggered;el.hold_timeout=null;el.hold_triggered=false;kiwi_clearTimeout(timeout);if(triggered){if(w3_contains(el,'w3-hold-done')){w3_call(cb,path,cb_param,false,{type:'hold-done'});}
w3int_post_action();return ignore(ev);}}}}
if(ev.type=='mouseout'){return;}
if(cb){w3_call(cb,path,cb_param,false,ev);}}
w3int_post_action();}
function w3_autorepeat_canceller(path,interval){w3int.autorepeat_canceller_path=isUndefined(path)?null:path;w3int.autorepeat_canceller_interval=isUndefined(interval)?null:interval;}
function w3_btn(text,cb){console.log('### DEPRECATED: w3_btn');return w3_button('',text,cb);}
function w3_cb_param_encode(cbp){if(isNoArg(cbp)){return 0;}
if(isObject(cbp)){return encodeURIComponent(JSON.stringify(cbp));}
return cbp;}
function w3_cb_param_decode(cbp){if(isNoArg(cbp)){return 0;}
if(isString(cbp)){cbp=decodeURIComponent(cbp);var obj;if(cbp[0]=='{'){try{obj=JSON.parse(cbp);}catch(ex){return cbp;}
return obj;}}
return cbp;}
function w3int_button(psa,path,text,cb,cb_param){var momentary=psa.includes('w3-momentary');var hold=psa.includes('w3-hold');var custom_events=psa.includes('w3-custom-events');cb_param=w3_cb_param_encode(cb_param);var ev_cb=function(cbp){return sprintf('"w3int_btn_evt(event,%s,%s,%s);"',sq(path),sq(cb),sq(cbp));};var onclick=cb?('onclick='+ev_cb(cb_param)):'';if(cb&&momentary&&!hold&&!custom_events){onclick+=' onmousedown='+ev_cb(0);onclick+=' ontouchstart='+ev_cb(0);}else
if(cb&&hold&&!momentary&&!custom_events){onclick+=' onmousedown='+ev_cb(cb_param);onclick+=' onmouseout='+ev_cb(cb_param);onclick+=' ontouchstart='+ev_cb(cb_param);onclick+=' ontouchend='+ev_cb(cb_param);}else
if(cb&&(custom_events||hold)&&!momentary){onclick+=' onmouseenter='+ev_cb(cb_param);onclick+=' onmouseleave='+ev_cb(cb_param);onclick+=' onmousedown='+ev_cb(cb_param);onclick+=' onmousemove="ignore(event);"';onclick+=' onmouseup="ignore(event);"';onclick+=' ontouchstart='+ev_cb(cb_param);onclick+=' ontouchmove="ignore(event);"';onclick+=' ontouchend='+ev_cb(cb_param);}
var default_style=(psa.includes('w3-round')||psa.includes('w3-circle'))?'':' w3-round-6px';var noactive=psa.includes('w3-noactive')?' class-button-noactive w3-ext-btn-noactive':'';var right=psa.includes('w3-btn-right')?'w3-ialign-right':'';var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.left,right);var psa_inner=w3_psa(psa3.right,path+' w3-btn w3-ext-btn'+default_style+noactive,'',onclick);if(psa.includes('w3-dump')){console.log('w3_button');console.log(psa3);console.log('psa_outer='+psa_outer);console.log('psa_inner='+psa_inner);}
var s='<button '+psa_inner+'>'+text+'</button>';if(psa_outer!='')s='<div '+psa_outer+'>'+s+'</div>';if(psa_outer.includes('w3-dump'))console.log(s);return s;}
function w3_button(psa,text,cb,cb_param){var path='id-btn-grp-'+w3int.btn_grp_uniq.toString();w3int.btn_grp_uniq++;return w3int_button(psa,path,text,cb,cb_param);}
function w3_button_path(psa,path,text,cb,cb_param){return w3int_button(psa,path,text,cb,cb_param);}
function w3_button_text(path,text,color_or_add_color,remove_color){var el=w3_el(path);if(!el)return null;if(isArg(text))
el.innerHTML=text;if(color_or_add_color){if(color_or_add_color.startsWith('w3-')){w3_remove(el,remove_color);w3_add(el,color_or_add_color);}else
el.style.color=color_or_add_color;}
return el;}
function w3_icon(psa,fa_icon,size,color,cb,cb_param){var momentary=psa.includes('w3-momentary');var hold=psa.includes('w3-hold');var custom_events=psa.includes('w3-custom-events');var pointer=(cb&&cb!='')?' w3-pointer':'';var path='id-btn-grp-'+w3int.btn_grp_uniq.toString();w3int.btn_grp_uniq++;var font_size=null;if(isNumber(size)&&size>=0)font_size=px(size);else
if(isString(size))font_size=size;font_size=font_size?(' font-size:'+font_size+';'):'';color=color||'';var c=color.split('|');color='';if(c[0]!='')color=' color:'+c[0]+';';if(c.length>=2&&c[1]!='')color+=' background-color:'+c[1]+';';cb_param=w3_cb_param_encode(cb_param);var ev_cb=function(cbp){return sprintf('"w3int_btn_evt(event, %s, %s, %s)"',sq(path),sq(cb),sq(cbp));};var onclick=cb?('onclick='+ev_cb(cb_param)):'';if(cb&&(momentary||hold)&&!custom_events){if(momentary)cb_param=0;onclick+=' onmousedown='+ev_cb(cb_param);onclick+=' onmouseout='+ev_cb(cb_param);onclick+=' ontouchstart='+ev_cb(cb_param);}else
if(cb&&(custom_events||hold)&&!momentary){onclick+=' onmouseenter='+ev_cb(cb_param);onclick+=' onmouseleave='+ev_cb(cb_param);onclick+=' onmousedown="ignore(event)"';onclick+=' onmousemove="ignore(event)"';onclick+=' onmouseup="ignore(event)"';onclick+=' ontouchstart='+ev_cb(cb_param);onclick+=' ontouchmove="ignore(event)"';onclick+=' ontouchend='+ev_cb(cb_param);}
var p=w3_psa(psa,path+' w3-ext-icon'+pointer+' fa '+fa_icon,font_size+color,onclick);var s='<i '+p+'></i>';return s;}
function w3_spin(el,cond){el=w3_el(el);if(!el)return null;cond=isArg(cond)?cond:true;w3_remove_then_add(el,'fa-spin',cond?'fa-spin':'');}
function w3int_input_keydown(ev,path,cb){var i,s;var k=ev.key.toUpperCase();var ctrl=ev.ctrlKey;var el=w3_el(path);if(!el)return;var input_any_key=w3_contains(el,'w3-input-any-key');var input_any_change=w3_contains(el,'w3-input-any-change');var disabled=w3_parent_with(el,'w3-disabled');var trace=w3_contains(el,'w3-trace');if(trace)console.log('w3int_input_keydown k='+k+(ctrl?' CTRL ':'')+' val=<'+el.value+'> cb='+cb+' disabled='+disabled);var cb_a=cb.split('|');if(disabled){if(trace)console.log('w3int_input_keydown w3-disabled');return;}
if(input_any_key&&cb_a[1]){w3_call(cb_a[1],ev,true);}
if(ev.key=='Enter'){if(input_any_change){s=el.value;for(i=el.selectionStart;i<el.textLength;i++){if(s.charAt(i)!='\n')
break;}
if(i==el.textLength){while(s.endsWith('\n'))
s=s.slice(0,-1);w3_set_value(el,s);}
if(trace)console.log('ss='+el.selectionStart+' se='+el.selectionEnd+' tl='+el.textLength);if((el.selectionStart==el.selectionEnd&&el.selectionStart==el.textLength)||(el.selectionStart==0&&el.selectionEnd==el.textLength)){if(trace)console.log('w3_input_change...');w3_input_change(path,cb,'kd');}}else
if(el.value==''){w3_input_change(path,cb,'kd');}}
if(ev.key=='Backspace'&&input_any_change&&el.selectionStart==0&&el.selectionEnd==el.value.length){el.value='';w3_input_change(path,cb,'kd');}}
function w3int_input_keyup(ev,path,cb){}
function w3_input_process(ev){var a=ev.detail.split('|');var path=a[0];var cb=a[1];var el=w3_el(path);if(el){var trace=w3_contains(el,'w3-trace');if(trace)console.log('w3_input_process path='+path+' val='+el.value+' cb='+cb);w3_input_change(path,cb,'w3_input_process');}}
function w3_input_change(path,cb,from){var el=w3_el(path);if(el){var trace=w3_contains(el,'w3-trace');if(trace)console.log('w3_input_change path='+path+' from='+from);if(cb){var cb_a=cb.split('|');if(isArg(from))cb_a.push(from);w3_call(cb_a[0],path,el.value,false,cb_a);if(from=='in')return;}
w3_check_restart_reboot(el);w3_schedule_highlight(el);}
w3int_post_action();}
function w3int_input_up_down_cb(path,cb_param,first,ev){if(ev.type!='click'&&ev.type!='touch')return;var cb_a=cb_param.split('|');var delta=+cb_a[0];var id_s=cb_a[1];var cb_s=cb_a[2];var val=+w3_el(id_s).value+delta;w3_input_force(id_s,cb_s,val.toFixed(0));}
function w3_input(psa,label,path,val,cb,placeholder){var dump=psa.includes('w3-dump');if(dump)console.log('w3_input()...');var id=w3_add_id(path);cb=cb||'';var phold=placeholder?('placeholder="'+placeholder+'"'):'';var custom=psa.includes('w3-custom-events');var onchange=' onchange="w3_input_change('+sq(path)+', '+sq(cb)+', '+sq('ev')+')"';var oninput=psa.includes('w3-input-evt')?(' oninput="w3_input_change('+sq(path)+', '+sq(cb)+', '+sq('in')+')"'):'';var onkeydown=' onkeydown="w3int_input_keydown(event, '+sq(path)+', '+sq(cb)+')"';var onkeyup=' onkeyup="w3int_input_keyup(event, '+sq(path)+', '+sq(cb)+')"';var events=(path&&!custom)?(onchange+oninput+onkeydown+onkeyup):'';val=' value='+dq(w3_esc_dq(val)||'');var inline=psa.includes('w3-label-inline');var bold=!psa.includes('w3-label-not-bold');label=label||'';var label_spacing=(label!=''&&inline)?'w3int-margin-input':'';var psa3=w3_psa3(psa);if(dump)console.log(psa3);var psa_outer=w3_psa(psa3.left,inline?'w3-show-inline-new':'');var psa_label=w3_psa_mix(psa3.middle,(label!=''&&bold)?'w3-bold':'');var style=psa.includes('w3-no-styling')?'':'w3-input w3-border w3-hover-shadow';var type=psa3.right.includes('type=')?'':'type="text"';var psa_inner=w3_psa(psa3.right,w3_sb(id,style,label_spacing),'',w3_sb(type,phold));if(dump)console.log('O:['+psa_outer+'] L:['+psa_label+'] I:['+psa_inner+']');var in_s='<input id='+dq(id)+' '+psa_inner+val+events+'>';var cb_s='|'+id+'|'+cb;if(psa.includes('w3-up-down')){in_s=w3_inline('',w3_div('w3-flex-col w3-margin-R-4',w3_icon('w3-momentary w3-pointer w3-margin-B-1||title="up"','fa-arrow-up',15,'orange','w3int_input_up_down_cb','1'+cb_s),w3_icon('w3-momentary w3-pointer w3-margin-T-1||title="down"','fa-arrow-down',15,'cyan','w3int_input_up_down_cb','-1'+cb_s)),in_s);}
var s='<div '+psa_outer+'>'+
w3int_label(psa_label,label,path)+
in_s+'</div>';if(dump)console.log(s);return s;}
function w3_input_force(path,cb,input){var el=w3_el(path);if(!el)return;el.addEventListener('input',w3_input_process,true);el.value=input.replace('&vbar;','|');el.dispatchEvent(new CustomEvent('input',{detail:path+'|'+cb}));el.removeEventListener('input',w3_input_process,true);}
function w3_input_get(psa,label,path,cb,init_val,placeholder){var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save);cur_val=kiwi_decodeURIComponent('w3_input_get:'+path,cur_val);return w3_input(psa,label,path,cur_val,cb,placeholder);}
function w3_textarea(psa,label,path,val,rows,cols,cb){var id=w3_add_id(path);var spacing=(label!='')?' w3-margin-T-8':'';var custom=psa.includes('w3-custom-events');var onchange=psa.includes('w3-input-any-change')?'':(' onchange="w3_input_change('+sq(path)+', '+sq(cb)+')"');var onkeydown=' onkeydown="w3int_input_keydown(event, '+sq(path)+', '+sq(cb)+')"';var onkeyup=' onkeyup="w3int_input_keyup(event, '+sq(path)+', '+sq(cb)+')"';var events=(path&&!custom)?(onchange+onkeydown+onkeyup):'';var bold=!psa.includes('w3-label-not-bold');var psa3=w3_psa3(psa);var psa_label=w3_psa_mix(psa3.middle,(label!=''&&bold)?'w3-bold':'');var psa_inner=w3_psa(psa3.right,'w3-input w3-border w3-hover-shadow '+id+spacing,'','rows='+dq(rows)+' cols='+dq(cols));val=val||'';var s=w3_div(psa3.left,w3int_label(psa_label,label,path)+'<textarea '+psa_inner+events+'>'+val+'</textarea>');if(psa.includes('w3-dump'))console.log('s='+s);return s;}
function w3_textarea_get_param(psa,label,path,rows,cols,cb,init_val){var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save);cur_val=kiwi_decodeURIComponent('w3_textarea_get_param:'+path,cur_val);return w3_textarea(psa,label,path,cur_val,rows,cols,cb);}
function w3int_checkbox_change(path,cb,cb_param){var el=w3_el(path);w3_check_restart_reboot(el);if(cb){w3_schedule_highlight(el);w3_call(cb,path,el.checked,false,cb_param);}
w3int_post_action();}
function w3_checkbox(psa,label,path,checked,cb,cb_param){var id=w3_add_id(path);var onchange=' onchange="w3int_checkbox_change('+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"';var checked_s=checked?' checked':'';var inline=psa.includes('w3-label-inline');var left=psa.includes('w3-label-left');var bold=!psa.includes('w3-label-not-bold');var spacing=(label!=''&&inline)?(left?' w3-margin-L-8':' w3-margin-R-8'):'';var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.left,inline?'w3-show-inline-new':'');var psa_label=w3_psa_mix(psa3.middle,(label!=''&&bold)?'w3-bold':'');var psa_inner=w3_psa(psa3.right,'w3-input w3-width-auto w3-border w3-pointer w3-hover-shadow '+id+spacing,'','type="checkbox"');var ls=w3int_label(psa_label,label,path);var cs='<input '+psa_inner+checked_s+onchange+'>';var s='<div '+psa_outer+'>'+
(left?(ls+cs):(cs+ls))+'</div>';if(cb)
setTimeout(function(){w3_call(cb,path,checked,true,cb_param);},500);return s;}
function w3_checkbox_get_param(psa,label,path,cb,init_val,cb_param){var update_path_var=psa.includes('w3-update');var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?null:init_val,save,update_path_var);return w3_checkbox(psa,label,path,cur_val,cb,cb_param);}
function w3_checkbox_get(path){var el=w3_el(path);if(!el)return;return(el.checked?true:false);}
function w3_checkbox_set(path,checked){var el=w3_el(path);if(!el)return;el.checked=checked?true:false;}
var W3_SELECT_SHOW_TITLE=-1;function w3int_select_click(ev,path,cb,cb_param){var el=ev.target;if(el&&el.nodeName&&el.nodeName=='OPTION'){el.blur();w3int_post_action();}}
function w3int_select_change(ev,path,cb,cb_param){var el=ev.currentTarget;w3_check_restart_reboot(el);if(cb){w3_call(cb,path,el.value,false,cb_param);}
w3int_post_action();}
function w3int_select(psa,label,title,path,sel,opts_s,cb,cb_param){var id=w3_add_id(path);var first='';if(title!=''){var as=title.split('<br>');as.forEach(function(s,i){first+='<option value="-1" '+((sel==W3_SELECT_SHOW_TITLE&&i==0)?'selected':'')+' disabled>'+s+'</option>';});}else{if(sel==W3_SELECT_SHOW_TITLE)sel=0;}
var inline=psa.includes('w3-label-inline');var bold=!psa.includes('w3-label-not-bold');var spacing=(label!=''&&!inline&&!psa.includes('w3-margin-T-'))?'w3-margin-T-8':'';if(inline)spacing+='w3-margin-left';if(cb==undefined)cb='';var onchange='onchange="w3int_select_change(event, '+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"';var onclick='onclick="w3int_select_click(event, '+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"';var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.left,inline?'w3-show-inline-new':'');var psa_label=w3_psa_mix(psa3.middle,(label!=''&&bold)?'w3-bold':'');var psa_inner=w3_psa(psa3.right,w3_sb(id,'w3-select-menu',spacing),'',onchange+' '+onclick);var s='<div '+psa_outer+'>'+
w3int_label(psa_label,label,path)+
((!inline&&label!='')?'<br>':'')+'<select '+psa_inner+'>'+first+opts_s+'</select>'+'</div>';if(cb&&sel!=W3_SELECT_SHOW_TITLE)
setTimeout(function(){w3_call(cb,path,sel,true,cb_param);},500);if(psa.includes('w3-dump'))console.log(s);return s;}
function w3int_select_options(sel,opts,show_empty){var s='';if(isString(opts)){var rng=opts.split(':');if(rng.length==2){var min=+rng[0];var max=+rng[1];var idx=0;for(var i=min;i<=max;i++){s+='<option value='+dq(idx)+' '+((idx==sel)?'selected':'')+'>'+i+'</option>';idx++;}}}else
if(isArray(opts)){opts.forEach(function(obj,i){if(obj==null)return;if(isObject(obj)){var hasName=isDefined(obj.name);if(hasName&&!show_empty&&obj.name=='')return;obj=hasName?obj.name:w3_obj_seq_el(obj,0);}
s+='<option value='+dq(i)+' '+((i==sel)?'selected':'')+'>'+obj+'</option>';});}else
if(isObject(opts)){if(opts==null)return'';w3_obj_enum(opts,function(key,i,obj){var value,text,disabled=false;if(isObject(obj)){value=isDefined(obj.value)?obj.value:i;var hasName=isDefined(obj.name);if(hasName&&!show_empty&&obj.name=='')return;text=hasName?obj.name:key;if(isDefined(obj.disabled)&&obj.disabled)disabled=true;}else{value=i;text=obj;}
s+='<option value='+dq(value)+((i==sel)?' selected':'')+(disabled?' disabled':'')+'>'+text+'</option>\n';});}
if(sel==null){s+='<option value=-1 selected disabled>(unknown)</option>\n';}
return s;}
function w3_select(psa,label,title,path,sel,opts,cb,cb_param){var s=w3int_select_options(sel,opts,psa.includes('w3-show-empty'));if(psa.includes('w3-dump'))console.log(s);return w3int_select(psa,label,title,path,sel,s,cb,cb_param);}
function w3int_select_hier(psa,label,title,path,sel,collapse,opts,cb,cb_param){var s='';var idx=0;if(!isObject(opts))return;w3_obj_enum(opts,function(key,i,a){if(!isNumber(+key)){as=key.split('_');as.forEach(function(e){if(!e||e!='')
s+='<option value='+dq(idx++)+' disabled>'+e+'</option> ';});}
if(!isArray(a))return;a.forEach(function(el,j){if(collapse&&j>=collapse)return;var v=w3_first_value(el);if(v=='null')return;var v2=w3_second_value(el);var _class=v2?(' class='+dq(v2)):'';s+='<option value='+dq(idx++)+' id="id-'+i+'-'+j+'"'+_class+'>'+v.toString()+'</option> ';});});return w3int_select(psa,label,title,path,sel,s,cb,cb_param);}
function w3_select_hier(psa,label,title,path,sel,opts,cb,cb_param){return w3int_select_hier(psa,label,title,path,sel,0,opts,cb,cb_param);}
function w3_select_hier_collapse(psa,label,title,path,sel,collapse,opts,cb,cb_param){return w3int_select_hier(psa,label,title,path,sel,collapse,opts,cb,cb_param);}
function w3_select_conditional(psa,label,title,path,sel,opts,cb,cb_param){var s='';var idx=0;if(!isArray(opts))return;opts.forEach(function(el){if(isArray(el))
s+='<option value='+dq(idx)+' '+((idx==sel)?'selected':'')+' '+(el[1]?'':'disabled')+'>'+el[0]+'</option> ';idx++;});return w3int_select(psa,label,title,path,sel,s,cb,cb_param);}
function w3_select_set_disabled(path,value,disabled,title){w3_iterate_children(path,function(el,i){if(el.value==value){el.disabled=disabled?true:false;if(isArg(title))el.title=title;}});}
function w3_select_get_param(psa,label,title,path,opts,cb,init_val,cb_param){var update_path_var=psa.includes('w3-update');var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?0:init_val,save,update_path_var);return w3_select(psa,label,title,path,cur_val,opts,cb,cb_param);}
function w3_select_enum(path,func){path=w3_el(path);if(!path)return;w3_iterate_children(path,func);}
function w3_select_match(path,s){var found=false,idx=-1;w3_select_enum(path,function(e){if(!found&&!e.disabled&&e.innerHTML.toLowerCase().startsWith(s)){idx=e.value;found=true;}});return{found:found,idx:idx};}
function w3_select_get_value(path,idx){var found=null,last_disabled=null;w3_select_enum(path,function(e){if(e.value==idx)
found=e.innerHTML;if(!found&&e.disabled)
last_disabled=e.innerHTML;});return{option:found,last_disabled:last_disabled};}
function w3_select_value(path,idx,opt){if(w3_opt(opt,'all')){w3_els(path,function(el){el.value=idx;});}else{var el=w3_el(path);if(!el)return;el.value=idx;}}
function w3_select_set_if_includes(path,s,opt){var found=false;var re=RegExp(s);w3_select_enum(path,function(option){if(re.test(option.innerHTML)){if(!found){w3_select_value(path,option.value);if(w3_opt(opt,'cb')){w3_call(opt.cb,path,option.value);}
found=true;}}});return found;}
function w3int_slider_change(ev,complete,path,cb,cb_param){var el=ev.currentTarget;w3_check_restart_reboot(el);if(cb){w3_call(cb,path,el.value,complete,false,cb_param);}
if(complete){w3int_post_action();}}
function w3int_slider_wheel(evt,path,cb,cb_param,need_shift_s){var need_shift=+need_shift_s;w3int.rate_limit_evt[cb]=evt;w3int.rate_limit_need_shift[cb]=need_shift;w3int.rate_limit[cb](cb_param);if(!need_shift||evt.shiftKey)
evt.preventDefault();}
function w3_slider_wheel(cb,el,cur,slow,fast){el=w3_el(el);if(!el)return null;var evt=w3int.rate_limit_evt[cb];console.log(cb+' need_shift='+w3int.rate_limit_need_shift[cb]+' shiftKey='+evt.shiftKey+' button='+evt.button+' buttons='+evt.buttons);if(w3int.rate_limit_need_shift[cb]&&!evt.shiftKey)
return null;var x=evt.deltaX;var y=evt.deltaY;var ay=Math.abs(y);var up_down=((x<0&&y<=0)||(x>=0&&y<0));up_down=up_down?1:-1;var speed=up_down*((ay<50)?slow:fast);var nval=cur+speed;return w3_clamp(nval,+el.min,+el.max);}
function w3_slider(psa,label,path,val,min,max,step,cb,cb_param){var dump=psa.includes('w3-dump');var id=w3_add_id(path);var inline=psa.includes('w3-label-inline');var bold=!psa.includes('w3-label-not-bold');var spacing=(label!=''&&inline)?'w3-margin-L-8':'';if(inline)spacing+=' w3-margin-left';value=(val==null)?'':w3_strip_quotes(val);value='value='+dq(value);cb_param=cb_param||0;var oc=' oninput="w3int_slider_change(event, 0, '+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"';var os=' onchange="w3int_slider_change(event, 1, '+sq(path)+', '+sq(cb)+', '+sq(cb_param)+')"';var ow='';if(psa.includes('w3-wheel')){var need_shift=psa.includes('w3-wheel-shift')?1:0;var cb_wheel=removeEnding(cb,'_cb')+'_wheel_cb';ow=' onwheel="w3int_slider_wheel(event, '+sq(path)+', '+sq(cb_wheel)+', '+sq(cb_param)+', '+sq(need_shift)+')"';w3int.rate_limit[cb_wheel]=kiwi_rateLimit(cb_wheel,170);}
var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.left,inline?'w3-show-inline-new':'');var psa_label=w3_psa_mix(psa3.middle,(label!=''&&bold)?'w3-bold':'');var psa_inner=w3_psa(psa3.right,w3_sb(id,spacing),'',value+' type="range" min='+dq(min)+' max='+dq(max)+' step='+dq(step)+oc+os+ow);var s=(label!='')?('<div '+psa_outer+'>'+
w3int_label(psa_label,label,path)+
((!inline&&label!='')?'<br>':'')+'<input '+psa_inner+'>'+'</div>'):('<input '+psa_inner+'>');if(cb)
setTimeout(function(){w3_call(cb,path,val,true,true,cb_param);},500);if(dump)console.log(s);return s;}
function w3_slider_set(path,val,cb){w3_set_value(path,val);w3_call(cb,path,val,true,false);}
function w3_slider_setup(path,min,max,step,val){var el=w3_el(path);if(!el)return el;el.min=min;el.max=max;el.step=step;el.value=val;return el;}
function w3_slider_get_param(psa,label,path,min,max,step,cb,cb_param,init_val){var update_path_var=psa.includes('w3-update');var save=psa.includes('w3-defer')?EXT_SAVE_DEFER:undefined;var cur_val=ext_get_cfg_param(path,(init_val==undefined)?0:init_val,save,update_path_var);return w3_slider(psa,label,path,cur_val,min,max,step,cb,cb_param);}
function w3_menu(psa,cb){var id=psa.replace(/\s+/g,' ').split(' |')[0];cb=cb||'';var onclick='onclick="w3int_menu_onclick(event, '+sq(id)+', '+sq(cb)+')"'+' oncontextmenu="w3int_menu_onclick(event, '+sq(id)+', '+sq(cb)+')"';var p=w3_psa(psa,'w3-menu w3-menu-container w3-round-large','',onclick);var s='<div '+p+'></div>';w3_el('id-w3-misc-container').innerHTML+=s;}
function w3_menu_items(id,arr,max_vis){if(w3int.menu_debug)canvas_log('w3_menu_items cur='+w3int.menu_cur_id);w3_menu_close('open');w3int.menu_cur_id=id;var s='';var i,idx=0,prop,attr;var items;if(isArray(arr)){items=arr;}else{items=[];for(i=1;i<arguments.length;i++)
items.push(arguments[i]);}
if(w3int.menu_debug)canvas_log('#='+items.length);for(i=0;i<items.length;i++){if(w3int.menu_debug)canvas_log('i='+i+' '+items[i]);if(items[i]==null)continue;prop='w3-menu ';attr='id='+dq(idx);if(items[i]=='<hr>'){prop+='w3-menu-item-hr';idx++;}else
if(items[i].charAt(0)=='!'){prop+='w3-menu-item-disabled';items[i]=items[i].substr(1);idx++;}else{prop+='w3-menu-item';idx++;if(!kiwi_isMobile())prop+=' w3-menu-item-hover';}
var psa=w3_psa_mix('',prop,'',attr);s+=w3_div(psa,items[i]);}
if(w3int.menu_debug)canvas_log('s#='+s.length);var el=w3_el(id);el.innerHTML=s;if(w3int.menu_debug)
canvas_log('BUILD');max_vis=max_vis||items.length;if(items.length>max_vis){el.style.height=px((max_vis*(4+19.5+4))+2*8);w3_add(el,'w3-scroll-always-y');}else{el.style.height='';w3_remove(el,'w3-scroll-always-y');}
if(kiwi_isMobile()){if(mobile_laptop_test)console.log('w3_menu_items MOBILE '+id);w3_iterate_children(id,function(el,i){el.addEventListener('touchmove',w3int_menu_touch_move,false);if(mobile_laptop_test)
el.addEventListener('mousemove',w3int_menu_mouse_move,false);});}}
function w3int_menu_mouse_move(ev){var x=Math.round(ev.pageX);var y=Math.round(ev.pageY);w3int_menu_move('MMM',x,y);}
function w3int_menu_touch_move(ev){var x=Math.round(ev.touches[0].pageX);var y=Math.round(ev.touches[0].pageY);w3int_menu_move('MTM',x,y);}
function w3int_menu_move(which,x,y){var el=document.elementFromPoint(x,y);if(!el)return;if(w3_isScrollingY(w3int.menu_cur_id))return;var rtn=(!el||!w3_contains(el,'w3-menu-item'));if(w3int.prev_menu_hover_el&&(rtn||(el!=w3int.prev_menu_hover_el))){w3int.prev_menu_hover_el.style.background='';w3int.prev_menu_hover_el.style.color='';if(rtn){return;}}
el.style.background='rgb(79, 157, 251)';el.style.color='white';w3int.prev_menu_hover_el=el;}
function w3_menu_popup(id,close_func,x,y){var x0=x,y0=y;var el=w3_el(id);x=x||window.innerWidth/2;y=y||window.innerHeight/2;var slop=16;el.w3_realigned=false;if((x+el.clientWidth)+slop>window.innerWidth){x=window.innerWidth-el.clientWidth-slop;el.w3_realigned_time=Date.now();el.w3_realigned=true;}
el.style.left=px(x);var yt=y+el.clientHeight+slop;if(yt>window.innerHeight){y=window.innerHeight-el.clientHeight-slop;el.w3_realigned_time=Date.now();el.w3_realigned=true;}
el.style.top=px(y);w3_visible(el,true);if(w3int.menu_debug)
canvas_log('VIS');w3int.menu_active=true;el.w3_menu_x=x;w3int.menu_close_func=close_func;w3int.menu_first=true;window.addEventListener("keyup",w3int_menu_event,false);window.addEventListener("mousedown",w3int_menu_event,false);window.addEventListener("touchstart",w3int_menu_event,false);window.addEventListener("click",w3int_menu_event,false);}
function w3_menu_active(){return w3int.menu_active;}
function w3int_menu_onclick(ev,id,cb,cb_param){if(w3int.menu_debug)
canvas_log('menu_onclick '+id+' from='+(cb_param||ev.type));var el=w3_el(id);if(el.w3_realigned){el.w3_realigned=false;var when=Date.now()-el.w3_realigned_time;if(when<50){if(w3int.menu_debug)canvas_log('XRe'+when);return cancelEvent(ev);}
if(w3int.menu_debug)canvas_log('XOK'+when);}
if(ev!=null&&cb!=null){var _id=ev.target.id;var idx=+_id;if(_id==''||isNaN(idx))_id=ev.target.parentNode.id;idx=+_id;if(_id==''||isNaN(idx))idx=-1;if(w3int.menu_debug)
canvas_log('CALL: '+idx);if(idx==-1)return;w3_call(cb,idx,el.w3_menu_x,cb_param,ev);}
w3_visible(el,false);if(w3int.menu_debug)
canvas_log('NOT_VIS');w3int.menu_active=false;window.removeEventListener("keyup",w3int_menu_event,false);window.removeEventListener("mousedown",w3int_menu_event,false);window.removeEventListener("touchstart",w3int_menu_event,false);window.removeEventListener("click",w3int_menu_event,false);if(ev!=null){if(w3int.menu_debug)canvas_log('Enull');return cancelEvent(ev);}}
function w3int_menu_event(evt){if(w3int.menu_debug)canvas_log('ME '+evt.type);var el=w3_el(w3int.menu_cur_id);if(el&&w3int.menu_close_func){var close=w3int.menu_close_func(evt,w3int.menu_first);w3int.menu_first=false;if(w3int.menu_debug)canvas_log('CLOSE='+close);if(close)w3_menu_close(evt.type);}}
function w3_menu_close(from){if(w3int.menu_debug)canvas_log('w3_menu_close '+from+' id='+w3int.menu_cur_id);if(!w3int.menu_cur_id)return;var el=w3_el(w3int.menu_cur_id);if(!el)return;el.w3_realigned=false;w3int_menu_onclick(null,w3int.menu_cur_id,null,'menu_close');w3int.menu_cur_id=null;}
function w3_num_cb(path,val){var v=parseFloat(val);if(val=='')v=0;if(isNaN(v)){w3_set_value(path,0);v=0;}
setVarFromString(path,v);}
function w3_bool_cb(path,val){v=+val;setVarFromString(path,v);}
function w3_string_cb(path,val){setVarFromString(path,val.toString());}
function w3_num_set_cfg_cb(path,val,first){var v=parseFloat(val);if(isNaN(v))v=0;var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,v,save);}
function w3_int_set_cfg_cb(path,val,first){var v=parseInt(val);if(isNaN(v))v=0;w3_set_value(path,v);var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,v,save);}
function w3_float_set_cfg_cb(path,val,first,cb_a){var prec=-1;if(cb_a&&cb_a.length>=2){prec=+(cb_a[1]);if(isNaN(prec))prec=-1;}
val=parseFloat(val);if(isNaN(val)){val=ext_get_cfg_param(path);}else{if(prec!=-1){var s=val.toFixed(prec);val=+s;}
var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,val,save);}
w3_set_value(path,val);}
function w3_bool_set_cfg_cb(path,val,first){var v;if(val==true||val==1)v=true;else
if(val==false||val==0)v=false;else
v=false;var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,v,save);}
function w3_string_old_set_cfg_cb(path,val,first){console.log('w3_string_old_set_cfg_cb: path='+path+' '+typeof(val)+' <'+val+'> first='+first);var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,encodeURIComponent(val.toString()),save);}
function w3_string_set_cfg_cb(path,val,first){w3_json_set_cfg_cb(path,val,first);}
function w3_json_set_cfg_cb(path,val,first){var v=val;if(isString(v))v=JSON.stringify(v);try{JSON.parse(v);}catch(ex){console.log('w3_json_set_cfg_cb: path='+path+' '+typeof(val)+' <'+val+'> first='+first);console.log('w3_json_set_cfg_cb: DANGER value did not parse as JSON!');return;}
var save=isArg(first)?(first?false:true):true;ext_set_cfg_param(path,val,save);}
function w3_url_set_cfg_cb(path,val,first){if(val!=''&&!val.startsWith('http://')&&!val.startsWith('https://'))val='http://'+val;w3_string_set_cfg_cb(path,val,first);w3_set_value(path,val);}
function w3_remove_trailing_index(path,sep){sep=sep||'-';var re=new RegExp('(.*)'+sep+'([-]?[0-9]+)');var el=re.exec(path);var idx;if(!el){idx=null;el=path;}else{idx=el[2];el=el[1];}
return{el:el,idx:idx};}
var w3_MENU_NEXT=1;var w3_MENU_PREV=-1;function w3_select_next_prev_cb(path,cb_param,first){var val;if(dbgUs)console.log('w3_select_next_prev_cb cb_param='+decodeURIComponent(cb_param));var cbp=w3_cb_param_decode(cb_param);if(!isObject(cbp)){console.log('w3_select_next_prev_cb cb_param is not an object');return;}
if(dbgUs)console.log('w3_select_next_prev_cb dir='+cbp.dir+' id='+cbp.id);var prev=0,capture_the_next=0,captured_next=0,captured_prev=0;var menu_s,el;for(var i=0;(el=w3_el(menu_s=cbp.id+i))!=null;i++){val=el.value;if(dbgUs)console.log('menu_s='+menu_s+' value='+val);if(val==-1)continue;w3_select_enum(menu_s,function(option){var content_check=(isUndefined(cbp.isNumeric)||(cbp.isNumeric==true&&isNumber(parseInt(option.innerText))));if(option.disabled||!content_check)return;if(dbgUs)console.log('consider val='+option.value+' \"'+option.innerText+'\" content_check='+content_check);if(capture_the_next){captured_next=option.value;capture_the_next=0;}
if(option.value===val){captured_prev=prev;capture_the_next=1;}
prev=option.value;});break;}
if(dbgUs)console.log('i='+i+' captured_prev='+captured_prev+' captured_next='+captured_next);val=0;if(cbp.dir==w3_MENU_NEXT&&captured_next)val=captured_next;if(cbp.dir==w3_MENU_PREV&&captured_prev)val=captured_prev;if(dbgUs)console.log('w3_select_next_prev_cb val='+val);w3_call(cbp.func,menu_s,val,first);}
function w3_table(psa){var p=w3_psa(psa,'w3-table w3-table-default');var s='<table '+p+'>';for(var i=1;i<arguments.length;i++){s+=arguments[i];}
s+='</table>';return s;}
function w3_table_heads(psa){var p=w3_psa(psa,'w3-table-head');var s='';for(var i=1;i<arguments.length;i++){if(arguments[i]==null)continue;s+='<th '+p+'>';s+=arguments[i];s+='</th>';}
return s;}
function w3_table_row(psa){var p=w3_psa(psa,'w3-table-row');var s='<tr '+p+'>';for(var i=1;i<arguments.length;i++){if(arguments[i]==null)continue;s+=arguments[i];}
s+='</tr>';return s;}
function w3_table_cells(psa){var p=w3_psa(psa,'w3-table-cell');var s='';for(var i=1;i<arguments.length;i++){if(arguments[i]==null)continue;s+='<td '+p+'>';s+=arguments[i];s+='</td>';}
return s;}
function w3_inline(psa,attr){var narg=arguments.length;var dump=psa.includes('w3-dump');if(psa==''&&attr==''&&narg>2){console.log('### w3_inline OLD API DEPRECATED');var args=Array.prototype.splice.call(arguments,0);args.splice(0,1);return w3_inline.apply(null,args);}else{var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.middle,'w3-show-inline-new');var psa_inner=w3_psa(psa3.right);if(dump)console.log('w3_inline psa_outer='+psa_outer+' psa_inner='+psa_inner);var s='<div w3d-inlo '+psa_outer+'>';for(var i=1;i<narg;i++){var a=arguments[i];if(!a)continue;if(dump)console.log('w3_inline i='+i+' a='+a);var psa_merge=false;if(a.startsWith('w3-')||a.startsWith('id-')){psa=w3_psa(psa3.right,a);i++;a=arguments[i];psa_merge=true;}else{psa='';if(psa_inner!=''){var psa3r='';var a1=psa3.right.split(' ');a1.forEach(function(p1){var a2=p1.split(':');if(a2.length==2){var n=+a2[0];psa3r=w3_sb(psa3r,(n==(i-1))?a2[1]:'');}else{psa3r=w3_sb(psa3r,p1);}});psa=w3_psa(psa3r);}}
if(psa3.right==''&&!psa_merge&&a.startsWith('<div '))
s+=a;else
s+='<div w3d-inli-'+w3_sb(i-1,psa)+'>'+a+'</div>';}
s+='</div>';if(dump)console.log(s);return s;}}
function w3_inline_array(psa,ar){ar.unshift(psa);return w3_inline.apply(null,ar);}
function w3_inline_percent(psa){var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.middle,'w3-show-inline-new');var narg=arguments.length;var total=0;var prop=psa.includes('w3-debug')?'w3_debug ':'';var last_halign_end=psa.includes('w3-last-halign-end');var s='<div w3d-inlpo '+psa_outer+'>';for(var i=1;i<narg;i+=2){var style;if(i+1<narg){style='flex-basis:'+arguments[i+1]+'%';total+=arguments[i+1];}else{style='flex-basis:'+(100-total)+'%';}
if(i==narg-1&&last_halign_end)prop+='w3-flex w3-halign-end';s+='<div w3d-inlpi-'+((i-1)/2)+' '+w3_psa(psa3.right,prop,style)+'>'+arguments[i]+'</div>';}
s+='</div>';return s;}
function w3_div(psa){var p=w3_psa(psa);var s='<div w3d-div '+p+'>';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
s+='</div>';return s;}
function w3_span(psa){var p=w3_psa(psa,'w3-show-span');var s='<div w3d-span '+p+'>';var narg=arguments.length;for(var i=1;i<narg;i++){s+=arguments[i];}
s+='</div>';return s;}
function w3_divs(psa,attr){var narg=arguments.length;var s,args;if(psa==''&&attr==''){console.log('### w3_divs OLD API 1 DEPRECATED');s=w3_div.apply(null,Array.prototype.splice.call(arguments,1));return s;}else
if(psa!=''&&attr==''&&narg>2){console.log('### w3_divs OLD API 2 DEPRECATED');args=Array.prototype.splice.call(arguments,0);args.splice(1,1);s=w3_div.apply(null,args);return s;}else
if(psa==''&&attr&&attr.startsWith('w3-')&&narg>2){console.log('### w3_divs OLD API 3 DEPRECATED');args=Array.prototype.splice.call(arguments,0);args.splice(0,1);s=w3_divs.apply(null,args);return s;}else
if(psa!=''&&attr&&attr.startsWith('w3-')&&narg>2){console.log('### w3_divs OLD API 4 DEPRECATED');args=Array.prototype.splice.call(arguments,2);args.splice(0,0,arguments[0]+'/'+arguments[1]);s=w3_divs.apply(null,args);return s;}else{var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.middle);var psa_inner=w3_psa(psa3.right);s='<div w3d-divso '+psa_outer+'>';for(var i=1;i<narg;i++){s+='<div w3d-divsi-'+(i-1)+' '+psa_inner+'>'+arguments[i]+'</div>';}
s+='</div>';return s;}}
function w3_col_percent(psa){var psa3=w3_psa3(psa);var psa_outer=w3_psa(psa3.middle,'w3-row');var narg=arguments.length;var s='<div w3d-colpo '+psa_outer+'>';for(var i=1;i<narg;i+=2){var prop,style;if(i+1<narg){prop='w3-col';style='width:'+arguments[i+1]+'%';}else{prop='w3-rest';style='';}
s+='<div w3d-colpi-'+((i-1)/2)+' '+w3_psa(psa3.right,prop,style)+'>'+arguments[i]+'</div>';}
s+='</div>';return s;}
function w3_text(psa,text){var style=(psa.includes('w3-padding')||psa.includes('w3-nopad'))?'':'padding:0 4px 0 0';if(!psa.includes('w3-nobk'))style+='; background-color:inherit';var s=w3_div(w3_psa_mix(psa,'w3-text',style),text?text:' ');return s;}
function w3_code(psa){var psa3=w3_psa3(psa);var narg=arguments.length;var s='<pre '+w3_psa(psa3.left)+'><code '+w3_psa(psa3.middle)+'>';for(var i=1;i<narg;i++){s+='<code '+w3_psa(psa3.right)+'>'+arguments[i]+'</code>';}
s+='</code></pre>';return s;}
function w3_header(psa,size){var psa3=w3_psa3(psa);var narg=arguments.length;var s='<header '+w3_psa(psa3.middle)+'><h'+size+' '+w3_psa(psa3.right)+'>';for(var i=2;i<narg;i++){s+=arguments[i];}
s+='</h'+size+'></header>';return s;}
function w3_half(prop_row,prop_col,left,right,prop_left,prop_right){if(prop_left==undefined)prop_left='';if(prop_right==undefined)prop_right='';var s='<div class="w3-row '+prop_row+'">'+'<div class="w3-col w3-half '+prop_col+prop_left+'">'+
left+'</div>'+'<div class="w3-col w3-half '+prop_col+prop_right+'">'+
(right?right:'')+'</div>'+'</div>';return s;}
function w3_third(prop_row,prop_col,left,middle,right){var s='<div class="w3-row '+prop_row+'">'+'<div class="w3-col w3-third '+prop_col+'">'+
left+'</div>'+'<div class="w3-col w3-third '+prop_col+'">'+
(middle?middle:'')+'</div>'+'<div class="w3-col w3-third '+prop_col+'">'+
(right?right:'')+'</div>'+'</div>';return s;}
function w3_quarter(prop_row,prop_col,left,middleL,middleR,right){var s='<div class="w3-row '+prop_row+'">'+'<div class="w3-col w3-quarter '+prop_col+'">'+
left+'</div>'+'<div class="w3-col w3-quarter '+prop_col+'">'+
(middleL?middleL:'')+'</div>'+'<div class="w3-col w3-quarter '+prop_col+'">'+
(middleR?middleR:'')+'</div>'+'<div class="w3-col w3-quarter '+prop_col+'">'+
(right?right:'')+'</div>'+'</div>';return s;}
function w3_canvas(psa,w,h,opt){var s='';var pad=w3_opt(opt,'pad',null);var pad_top=w3_opt(opt,'pad_top',0);var pad_bot=w3_opt(opt,'pad_bottom',0);if(!isNull(pad))pad_top=pad_bot=pad;pad=pad_top+pad_bot;if(pad){s+=sprintf(' padding-top:%dpx; padding-bottom:%dpx;',pad_top,pad_bot);}
var left=w3_opt(opt,'left','');if(left!='')s+=sprintf(' left:%dpx;',left);var right=w3_opt(opt,'right','');if(right!='')s+=sprintf(' right:%dpx;',right);var top=w3_opt(opt,'top','');if(top!='')s+=sprintf(' top:%dpx;',top);s='<canvas '+w3_psa(psa,null,'position:absolute;'+s,sprintf('width="%d" height="%d"',w,h))+'></canvas>';return s;}



